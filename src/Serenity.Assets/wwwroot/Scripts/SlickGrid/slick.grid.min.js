var Slick=Slick||{};Slick._=(()=>{var t=Object.defineProperty;var e=Object.getOwnPropertyDescriptor;var i=Object.getOwnPropertyNames;var s=Object.prototype.hasOwnProperty;var o=(e,i)=>{for(var s in i)t(e,s,{get:i[s],enumerable:true})};var l=(o,l,r,h)=>{if(l&&typeof l==="object"||typeof l==="function"){for(let a of i(l))if(!s.call(o,a)&&a!==r)t(o,a,{get:()=>l[a],enumerable:!(h=e(l,a))||h.enumerable})}return o};var r=e=>l(t({},"__esModule",{value:true}),e);var h={};o(h,{Grid:()=>S});var a=class{constructor(){this.__nonDataRow=true}};var n="slick-edit-preclick";typeof window!=="undefined"&&window.Slick&&(window.Slick.Map=Map);var d=class{isActive(t){return t?this.activeEditController===t:this.activeEditController!=null}activate(t){if(t===this.activeEditController){return}if(this.activeEditController!=null){throw"SleekGrid.EditorLock.activate: an editController is still active, can't activate another editController"}if(!t.commitCurrentEdit){
throw"SleekGrid.EditorLock.activate: editController must implement .commitCurrentEdit()"}if(!t.cancelCurrentEdit){throw"SleekGrid.EditorLock.activate: editController must implement .cancelCurrentEdit()"}this.activeEditController=t}deactivate(t){if(this.activeEditController!==t){throw"SleekGrid.EditorLock.deactivate: specified editController is not the currently active one"}this.activeEditController=null}commitCurrentEdit(){return this.activeEditController?this.activeEditController.commitCurrentEdit():true}cancelCurrentEdit(){return this.activeEditController?this.activeEditController.cancelCurrentEdit():true}};var c=new d;var u=class{constructor(){this._isPropagationStopped=false;this._isImmediatePropagationStopped=false}stopPropagation(){this._isPropagationStopped=true}isPropagationStopped(){return this._isPropagationStopped}stopImmediatePropagation(){this._isImmediatePropagationStopped=true}isImmediatePropagationStopped(){return this._isImmediatePropagationStopped}};var _=class{
constructor(){this._handlers=[]}subscribe(t){this._handlers.push(t)}unsubscribe(t){for(var e=this._handlers.length-1;e>=0;e--){if(this._handlers[e]===t){this._handlers.splice(e,1)}}}notify(t,e,i){e=e||new u;i=i||this;var s;for(var o=0;o<this._handlers.length&&!(e.isPropagationStopped()||e.isImmediatePropagationStopped());o++){s=this._handlers[o].call(i,e,t)}return s}clear(){this._handlers=[]}};var p={BACKSPACE:8,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,PAGEDOWN:34,PAGEUP:33,RIGHT:39,TAB:9,UP:38};var f;var v;function g(t,e){if((e==null?void 0:e.frozenColumn)==null){delete e.frozenColumn;return}var i=e.frozenColumn+1;e.frozenColumn=-1;var s=0;while(s<t.length){var o=t[s++];if(i>0&&o.visible!==false){o.frozen=true;e.frozenColumn++;i--}else if(o.frozen!==void 0)delete o.frozen}}function w(t){if(t==null)return"";return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")}function C(t,e,i){return L(i)}function m(t){
if(t&&t.jquery){t.attr("unselectable","on").css("MozUserSelect","none").on("selectstart.ui",(function(){return false}))}}function R(){return f!=null?f:navigator.userAgent.toLowerCase().match(/gecko\//)?4e6:32e6}function y(t){if(!v||t){var e=$("<div style='position:absolute; top:-10000px; left:-10000px; width:100px; height:100px; overflow:scroll;'></div>").appendTo("body");v={width:Math.round(e.width()-e[0].clientWidth),height:Math.round(e.height()-e[0].clientHeight)};e.remove()}return v}function b(t,e,...i){var s=document.createElement(t);var o,l,r;if(e){for(o in e){l=e[o];if(l!=null&&l!==false)s.setAttribute(o,l===true?"":l)}}if(i){for(r of i)s.appendChild(r)}return s}function L(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function P(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return false;t.sort();e.sort();for(var i=0;i<t.length;i++){if(t[i]!==e[i])return false}return true}function E(t,e){if(e.length==0)return t
;var i={},s={},o=[];for(var l=0;l<e.length;l++)i[e[l]]=l;for(l=0;l<t.length;l++)s[t[l].id]=l;function r(e){for(var l=e;l<t.length;l++){var r=t[l];if(e!=l&&i[r.id]!=null)break;o.push(r);s[r.id]=null}}if(i[t[0].id]==null)r(0);for(var h of e){l=s[h];if(l!=null)r(l)}for(l=0;l<t.length;l++){var a=t[l];if(s[a.id]!=null){o.push(a);s[a.id]=null}}return o}function H(){$(this).addClass("ui-state-hover")}function T(){$(this).removeClass("ui-state-hover")}var x=class{constructor(t,e,i,s){if(i===void 0&&s===void 0){i=t;s=e}this.fromRow=Math.min(t,i);this.fromCell=Math.min(e,s);this.toRow=Math.max(t,i);this.toCell=Math.max(e,s)}isSingleRow(){return this.fromRow==this.toRow}isSingleCell(){return this.fromRow==this.toRow&&this.fromCell==this.toCell}contains(t,e){return t>=this.fromRow&&t<=this.toRow&&e>=this.fromCell&&e<=this.toCell}toString(){if(this.isSingleCell()){return"("+this.fromRow+":"+this.fromCell+")"}else{return"("+this.fromRow+":"+this.fromCell+" - "+this.toRow+":"+this.toCell+")"}}}
;var S=class{constructor(t,e,i,s){this._activeCellNode=null;this._actualFrozenRow=-1;this._cellCssClasses={};this._cellHeightDiff=0;this._cellWidthDiff=0;this._colLeft=[];this._colRight=[];this._currentEditor=null;this._footerRowH=0;this._frozenRowsHeight=0;this._groupingPanelH=0;this._hasFrozenRows=false;this._headerColumnWidthDiff=0;this._headerRowH=0;this._hEditorLoader=null;this._hPostRender=null;this._hPostRenderCleanup=null;this._hRender=null;this._ignoreScrollUntil=0;this._initialized=false;this._jQueryNewWidthBehaviour=false;this._numVisibleRows=0;this._page=0;this._pageOffset=0;this._pagingActive=false;this._pagingIsLastPage=false;this._paneBottomH=0;this._paneTopH=0;this._plugins=[];this._postProcessCleanupQueue=[];this._postProcessedRows={};this._postProcessFromRow=null;this._postProcessGroupId=0;this._postProcessToRow=null;this._rowsCache={};this._rtl=false;this._rtlE="right";this._rtlS="left";this._scrollLeft=0;this._scrollLeftPrev=0;this._scrolLLeftRendered=0
;this._scrollTop=0;this._scrollTopPrev=0;this._scrollTopRendered=0;this._selectedRows=[];this._sortColumns=[];this._tabbingDirection=1;this._topPanelH=0;this._uid="slickgrid_"+Math.round(1e6*Math.random());this._viewportTopH=0;this._vScrollDir=1;this._boundAncestorScroll=[];this.onActiveCellChanged=new _;this.onActiveCellPositionChanged=new _;this.onAddNewRow=new _;this.onBeforeCellEditorDestroy=new _;this.onBeforeDestroy=new _;this.onBeforeEditCell=new _;this.onBeforeFooterRowCellDestroy=new _;this.onBeforeHeaderCellDestroy=new _;this.onBeforeHeaderRowCellDestroy=new _;this.onCellChange=new _;this.onCellCssStylesChanged=new _;this.onClick=new _;this.onColumnsReordered=new _;this.onColumnsResized=new _;this.onContextMenu=new _;this.onDblClick=new _;this.onDrag=new _;this.onDragEnd=new _;this.onDragInit=new _;this.onDragStart=new _;this.onFooterRowCellRendered=new _;this.onHeaderCellRendered=new _;this.onHeaderClick=new _;this.onHeaderContextMenu=new _;this.onHeaderMouseEnter=new _
;this.onHeaderMouseLeave=new _;this.onHeaderRowCellRendered=new _;this.onKeyDown=new _;this.onMouseEnter=new _;this.onMouseLeave=new _;this.onScroll=new _;this.onSelectedRowsChanged=new _;this.onSort=new _;this.onValidationError=new _;this.onViewportChanged=new _;this.handleSelectedRangesChanged=(t,e)=>{var i=this._selectedRows.slice(0);this._selectedRows=[];var s={},o=this._cols;for(var l=0;l<e.length;l++){for(var r=e[l].fromRow;r<=e[l].toRow;r++){if(!s[r]){this._selectedRows.push(r);s[r]={}}for(var h=e[l].fromCell;h<=e[l].toCell;h++){if(this.canCellBeSelected(r,h)){s[r][o[h].id]=this._options.selectedCellCssClass}}}}this.setCellCssStyles(this._options.selectedCellCssClass,s);if(!P(i,this._selectedRows)){var a=t&&t.detail&&t.detail.caller||"click";var n=this._selectedRows.filter((t=>i.indexOf(t)<0));var d=i.filter((t=>this._selectedRows.indexOf(t)<0));this.trigger(this.onSelectedRowsChanged,{rows:this.getSelectedRows(),previousSelectedRows:i,caller:a,changedSelectedRows:n,
changedUnselectedRows:d},t)}this._selectedRows=[];var s={},o=this._cols;for(var l=0;l<e.length;l++){for(var r=e[l].fromRow;r<=e[l].toRow;r++){if(!s[r]){this._selectedRows.push(r);s[r]={}}for(var h=e[l].fromCell;h<=e[l].toCell;h++){if(this.canCellBeSelected(r,h)){s[r][o[h].id]=this._options.selectedCellCssClass}}}}};this.viewOnRowCountChanged=()=>{this.updateRowCount();this.render()};this.viewOnRowsChanged=(t,e)=>{this.invalidateRows(e.rows);this.render();this.updateFooterTotals()};this.viewOnDataChanged=()=>{this.invalidate();this.render()};this.handleHeaderRowScroll=()=>{if(this._ignoreScrollUntil>=(new Date).getTime())return;var t=this.hasFrozenColumns?this._headerRowColsR.parentElement.scrollLeft:this._headerRowColsL.parentElement.scrollLeft;if(t!=this._scrollContainerX.scrollLeft){this._scrollContainerX.scrollLeft=t}};this.handleFooterRowScroll=()=>{if(this._ignoreScrollUntil>=(new Date).getTime())return
;var t=this.hasFrozenColumns?this._footerRowR.parentElement.scrollLeft:this._footerRowColsL.parentElement.scrollLeft;if(t!=this._scrollContainerX.scrollLeft){this._scrollContainerX.scrollLeft=t}};this.handleActiveCellPositionChange=()=>{if(!this._activeCellNode){return}this.trigger(this.onActiveCellPositionChanged,{});if(this._currentEditor){var t=this.getActiveCellPosition();if(this._currentEditor.show&&this._currentEditor.hide){if(!t.visible){this._currentEditor.hide()}else{this._currentEditor.show()}}if(this._currentEditor.position){this._currentEditor.position(t)}}};if(typeof jQuery==="undefined"){throw"SlickGrid requires jquery module to be loaded"}if(!jQuery.fn.drag){throw"SlickGrid requires jquery.event.drag module to be loaded"}this._data=e;var o={addNewRowCssClass:"new-row",alwaysAllowHorizontalScroll:false,alwaysShowVerticalScroll:false,asyncEditorLoadDelay:100,asyncEditorLoading:false,asyncPostCleanupDelay:40,asyncPostRenderDelay:50,autoEdit:true,autoHeight:false,
cellFlashingCssClass:"flashing",dataItemColumnValueExtractor:null,defaultColumnWidth:80,defaultFormatter:C,editable:false,editorFactory:null,editorLock:c,enableAddRow:false,enableAsyncPostRender:false,enableAsyncPostRenderCleanup:false,enableCellNavigation:true,enableColumnReorder:true,enableTabKeyNavigation:true,enableTextSelectionOnCells:false,explicitInitialization:false,footerRowHeight:25,forceFitColumns:false,forceSyncScrolling:false,formatterFactory:null,frozenBottom:false,frozenRow:-1,fullWidthRows:false,groupingPanel:false,groupingPanelHeight:34,headerRowHeight:25,leaveSpaceForNewRows:false,useLegacyUI:true,minBuffer:3,multiColumnSort:false,multiSelect:true,renderAllCells:false,rowHeight:25,selectedCellCssClass:"selected",showCellSelection:true,showColumnHeader:true,showFooterRow:false,showGroupingPanel:true,showHeaderRow:false,showTopPanel:false,suppressActiveCellChangeOnEdit:false,topPanelHeight:25};this._colDefaults={name:"",resizable:true,sortable:false,minWidth:30,
rerenderOnResize:false,headerCssClass:null,footerCssClass:null,defaultSortAsc:true,focusable:true,selectable:true};if(t instanceof jQuery)this._container=t[0];else if(t instanceof Element)this._container=t;else if(typeof t==="string")this._container=document.querySelector(t);if(this._container==null){throw new Error("SlickGrid requires a valid container, "+t+" does not exist in the DOM.")}this._rtl=$(document.body).hasClass("rtl")||$(this._container).css("direction")=="rtl";if(this._rtl){this._rtlS="right";this._rtlE="left"}s=$.extend({},o,s);this._options=s;this.validateAndEnforceOptions();this._colDefaults.width=s.defaultColumnWidth;g(i,this._options);this.setInitialCols(i);if(s.enableColumnReorder&&!$.fn.sortable){throw new Error("SlickGrid's 'enableColumnReorder = true' option requires jquery-ui.sortable module to be loaded")}this._editController={commitCurrentEdit:this.commitCurrentEdit.bind(this),cancelCurrentEdit:this.cancelCurrentEdit.bind(this)}
;$(this._container).empty().css("overflow","hidden").css("outline",0).addClass(this._uid);if(this._options.useLegacyUI)this._container.classList.add("ui-widget");if(!/relative|absolute|fixed/.test($(this._container).css("position"))){this._container.style.position="relative"}this._container.appendChild(this._focusSink1=b("div",{class:"slick-focus-sink",hideFocus:"",style:"position:fixed;width:0!important;height:0!important;top:0;left:0;outline:0!important;",tabIndex:"0"}));if(s.groupingPanel){this._container.appendChild(this._groupingPanel=b("div",{class:"slick-grouping-panel",style:"overflow:hidden; position:relative;"+(!s.showGroupingPanel?" display: none":"")}))}const l=this._options.useLegacyUI?" ui-state-default":"";var r=this.getCanvasWidth()+(this._scrollDims=y()).width+"px";this._paneHeaderL=b("div",{class:"slick-pane slick-pane-header slick-pane-left",tabIndex:"0"},b("div",{class:"slick-header slick-header-left"+l,style:!s.showColumnHeader&&"display: none"
},this._headerColsL=b("div",{class:"slick-header-columns slick-header-columns-left",style:this._rtlS+":-1000px"})));this._paneHeaderR=b("div",{class:"slick-pane slick-pane-header slick-pane-right",tabIndex:"0"},b("div",{class:"slick-header slick-header-right"+l,style:!s.showColumnHeader&&"display: none"},this._headerColsR=b("div",{class:"slick-header-columns slick-header-columns-right",style:this._rtlS+":-1000px"})));var h=b("div",{class:"slick-headerrow"+l,style:!s.showHeaderRow&&"display: none"},this._headerRowColsL=b("div",{class:"slick-headerrow-columns slick-headerrow-columns-left"}),this._headerRowSpacerL=b("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));var a=b("div",{class:"slick-top-panel-scroller"+l,style:!s.showTopPanel&&"display: none"},this._topPanelL=b("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopL=b("div",{class:"slick-viewport slick-viewport-top slick-viewport-left",tabIndex:"0",hideFocus:""
},this._canvasTopL=b("div",{class:"grid-canvas grid-canvas-top grid-canvas-left",tabIndex:"0",hideFocus:""}));var n=b("div",{class:"slick-footerrow"+l,style:!s.showFooterRow&&"display: none"},this._footerRowColsL=b("div",{class:"slick-footerrow-columns slick-footerrow-columns-left"}),this._footerRowSpacerL=b("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopL=b("div",{class:"slick-pane slick-pane-top slick-pane-left",tabIndex:"0"},h,a,this._viewportTopL,n);var d=b("div",{class:"slick-headerrow"+l,style:!s.showHeaderRow&&"display: none"},this._headerRowColsR=b("div",{class:"slick-headerrow-columns slick-headerrow-columns-right"}),this._headerRowSpacerR=b("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));var u=b("div",{class:"slick-top-panel-scroller"+l,style:!s.showTopPanel&&"display: none"},this._topPanelR=b("div",{class:"slick-top-panel",style:"width: 10000px"}));this._viewportTopR=b("div",{
class:"slick-viewport slick-viewport-top slick-viewport-right",tabIndex:"0",hideFocus:""},this._canvasTopR=b("div",{class:"grid-canvas grid-canvas-top grid-canvas-right",tabIndex:"0",hideFocus:""}));var p=b("div",{class:"slick-footer-row"+l,style:!s.showFooterRow&&"display: none"},this._footerRowR=b("div",{class:"slick-footerrow-columns slick-footerrow-columns-right"}),this._footerRowSpacerR=b("div",{style:"display:block;height:1px;position:absolute;top:0;left:0;",width:r}));this._paneTopR=b("div",{class:"slick-pane slick-pane-top slick-pane-right",tabIndex:"0"},d,u,this._viewportTopR,p);this._paneBottomL=b("div",{class:"slick-pane slick-pane-bottom slick-pane-left",tabIndex:"0"},this._viewportBottomL=b("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-left",tabIndex:"0",hideFocus:""},this._canvasBottomL=b("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-left",tabIndex:"0",hideFocus:""})));this._paneBottomR=b("div",{
class:"slick-pane slick-pane-bottom slick-pane-right",tabIndex:"0"},this._viewportBottomR=b("div",{class:"slick-viewport slick-viewport-bottom slick-viewport-right",tabIndex:"0",hideFocus:""}),this._canvasBottomR=b("div",{class:"grid-canvas grid-canvas-bottom grid-canvas-right",tabIndex:"0",hideFocus:""}));this._container.append(this._paneHeaderL,this._paneHeaderR,this._paneTopL,this._paneTopR,this._paneBottomL,this._focusSink2=this._focusSink1.cloneNode());if(s.viewportClass)this.getViewports().toggleClass(s.viewportClass,true);if(!s.explicitInitialization){this.init()}this.bindToData()}init(){if(this._initialized)return;this._initialized=true;this.getViewportWidth();this.getViewportHeight();this.measureCellPaddingAndBorder();m($([this._headerColsL,this._headerColsR]));var t=this.getViewports();if(!this._options.enableTextSelectionOnCells){t.on("selectstart.ui",(function(){return $(this).is("input,textarea")}))}this.adjustFrozenRowOption();this.setPaneVisibility();this.setScroller()
;this.setOverflow();this.updateViewColLeftRight();this.createColumnHeaders();this.createColumnFooters();this.setupColumnSort();this.createCssRules();this.resizeCanvas();this.bindAncestorScrollEvents();$(this._container).on("resize.slickgrid",this.resizeCanvas.bind(this));t.on("scroll",this.handleScroll.bind(this));if(jQuery.fn.mousewheel&&(this.hasFrozenColumns()||this._hasFrozenRows)){t.on("mousewheel",this.handleMouseWheel.bind(this))}$([this._headerColsL.parentElement,this._headerColsR.parentElement]).on("contextmenu",this.handleHeaderContextMenu.bind(this)).on("click",this.handleHeaderClick.bind(this)).delegate(".slick-header-column","mouseenter",this.handleHeaderMouseEnter.bind(this)).delegate(".slick-header-column","mouseleave",this.handleHeaderMouseLeave.bind(this));this._headerRowColsL.parentElement.addEventListener("scroll",this.handleHeaderRowScroll);this._headerRowColsR.parentElement.addEventListener("scroll",this.handleHeaderRowScroll)
;this._footerRowColsL.parentElement.addEventListener("scroll",this.handleFooterRowScroll);this._footerRowR.parentElement.addEventListener("scroll",this.handleFooterRowScroll);$([this._focusSink1,this._focusSink2]).on("keydown",this.handleKeyDown.bind(this));var e=this.getCanvases();e.on("keydown",this.handleKeyDown.bind(this)).on("click",this.handleClick.bind(this)).on("dblclick",this.handleDblClick.bind(this)).on("contextmenu",this.handleContextMenu.bind(this)).on("draginit",this.handleDragInit.bind(this)).on("dragstart",{distance:3},this.handleDragStart.bind(this)).on("drag",this.handleDrag.bind(this)).on("dragend",this.handleDragEnd.bind(this)).delegate(".slick-cell","mouseenter",this.handleMouseEnter.bind(this)).delegate(".slick-cell","mouseleave",this.handleMouseLeave.bind(this));if(navigator.userAgent.toLowerCase().match(/webkit/)&&navigator.userAgent.toLowerCase().match(/macintosh/)){e.on("mousewheel",this.handleMouseWheel.bind(this))}}hasFrozenColumns(){
return this._frozenCols>0}registerPlugin(t){this._plugins.unshift(t);t.init(this)}unregisterPlugin(t){for(var e=this._plugins.length;e>=0;e--){if(this._plugins[e]===t){if(this._plugins[e].destroy){this._plugins[e].destroy()}this._plugins.splice(e,1);break}}}getPluginByName(t){for(var e=this._plugins.length-1;e>=0;e--){if(this._plugins[e].pluginName===t)return this._plugins[e]}}setSelectionModel(t){if(this._selectionModel){this._selectionModel.onSelectedRangesChanged.unsubscribe(this.handleSelectedRangesChanged);if(this._selectionModel.destroy){this._selectionModel.destroy()}}this._selectionModel=t;if(this._selectionModel){this._selectionModel.init(this);this._selectionModel.onSelectedRangesChanged.subscribe(this.handleSelectedRangesChanged)}}getScrollBarDimensions(){return this._scrollDims}getDisplayedScrollbarDimensions(){return{width:this._viewportHasVScroll?this._scrollDims.width:0,height:this._viewportHasHScroll?this._scrollDims.height:0}}getAbsoluteColumnMinWidth(){
return this._absoluteColMinWidth}getSelectionModel(){return this._selectionModel}getCanvasNode(){return this._canvasTopL}getCanvases(){return $([this._canvasTopL,this._canvasTopR,this._canvasBottomL,this._canvasBottomR])}getActiveCanvasNode(t){this.setActiveCanvasNode(t);return this._activeCanvasNode}setActiveCanvasNode(t){if(t){this._activeCanvasNode=$(t.target).closest(".grid-canvas")[0]}}getViewportNode(){return this._viewportTopL}getViewports(){return $([this._viewportTopL,this._viewportTopR,this._viewportBottomL,this._viewportBottomR])}getActiveViewportNode(t){this.setActiveViewportNode(t);return this._activeViewportNode}setActiveViewportNode(t){if(t){this._activeViewportNode=$(t.target).closest(".slick-viewport")[0]}}calcHeaderWidths(){this._headersWidthL=this._headersWidthR=0;var t=this._scrollDims.width;var e=this._cols,i=this._frozenCols;for(var s=0,o=e.length;s<o;s++){var l=e[s].width;if(i>0&&s>=i){this._headersWidthR+=l}else{this._headersWidthL+=l}}if(i>0){
this._headersWidthL=this._headersWidthL+1e3;this._headersWidthR=Math.max(this._headersWidthR,this._viewportW)+this._headersWidthL;this._headersWidthR+=t}else{this._headersWidthL+=t;this._headersWidthL=Math.max(this._headersWidthL,this._viewportW)+1e3}}getCanvasWidth(){var t=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW;var e=this._cols,i=e.length,s=this._frozenCols;this._canvasWidthL=this._canvasWidthR=0;while(i--){if(s>0&&i>=s){this._canvasWidthR+=e[i].width}else{this._canvasWidthL+=e[i].width}}var o=this._canvasWidthL+this._canvasWidthR;return this._options.fullWidthRows?Math.max(o,t):o}updateCanvasWidth(t){var e=this._canvasWidth;var i=this._canvasWidthL;var s=this._canvasWidthR;var o;this._canvasWidth=this.getCanvasWidth();var l=this._scrollDims.width;o=this._canvasWidth!==e||this._canvasWidthL!==i||this._canvasWidthR!==s;if(o||this.hasFrozenColumns()||this._hasFrozenRows){var r=this._canvasWidthL+"px";var h=this._canvasWidthR+"px"
;this._canvasTopL.style.width=r;this.calcHeaderWidths();this._headerColsL.style.width=this._headersWidthL+"px";this._headerColsR.style.width=this._headersWidthR+"px";if(this._groupingPanel){this._groupingPanel.style.width=this._canvasWidth+"px"}if(this.hasFrozenColumns()){var a=this._viewportW-this._canvasWidthL+"px";this._canvasTopR.style.width=h;this._paneHeaderL.style.width=r;this._paneHeaderR.style[this._rtlS]=r;this._paneHeaderR.style.width=a;this._paneTopL.style.width=r;this._paneTopR.style[this._rtlS]=r;this._paneTopR.style.width=a;this._headerRowColsL.style.width=r;this._headerRowColsL.parentElement.style.width=r;this._headerRowColsR.style.width=h;this._headerRowColsR.parentElement.style.width=a;this._footerRowColsL.style.width=r;this._footerRowColsL.parentElement.style.width=r;this._footerRowR.style.width=h;this._footerRowR.parentElement.style.width=a;this._viewportTopL.style.width=r;this._viewportTopR.style.width=a;if(this._hasFrozenRows){this._paneBottomL.style.width=r
;this._paneBottomR.style[this._rtlS]=r;this._viewportBottomL.style.width=r;this._viewportBottomR.style.width=a;this._canvasBottomL.style.width=r;this._canvasBottomR.style.width=h}}else{this._paneHeaderL.style.width="100%";this._paneTopL.style.width="100%";this._headerRowColsL.parentElement.style.width="100%";this._headerRowColsL.style.width=this._canvasWidth+"px";this._footerRowColsL.parentElement.style.width="100%";this._footerRowColsL.style.width=this._canvasWidth+"px";this._viewportTopL.style.width="100%";if(this._hasFrozenRows){this._viewportBottomL.style.width="100%";this._canvasBottomL.style.width=r}}this._viewportHasHScroll=this._canvasWidth>this._viewportW-l}var n=this._canvasWidth+(this._viewportHasVScroll?l:0)+"px";this._headerRowSpacerL.style.width=n;this._headerRowSpacerR.style.width=n;this._footerRowSpacerL.style.width=n;this._footerRowSpacerR.style.width=n;if(o||t){this.applyColumnWidths()}}bindAncestorScrollEvents(){
var t=this._hasFrozenRows&&!this._options.frozenBottom?this._canvasBottomL:this._canvasTopL;while((t=t.parentNode)!=document.body&&t!=null){if(t==this._viewportTopL||t.scrollWidth!=t.clientWidth||t.scrollHeight!=t.clientHeight){t.addEventListener("scroll",this.handleActiveCellPositionChange);this._boundAncestorScroll.push(t)}}}unbindAncestorScrollEvents(){if(this._boundAncestorScroll){for(var t of this._boundAncestorScroll)t.removeEventListener("scroll",this.handleActiveCellPositionChange)}this._boundAncestorScroll=[]}updateColumnHeader(t,e,i){if(!this._initialized){return}var s=this.getColumnIndex(t);if(s==null){return}var o=this._cols[s];var l=$([this._headerColsL,this._headerColsR]).children().eq(s);if(!l)return;if(e!==void 0){o.name=e}if(i!==void 0){o.toolTip=i}this.trigger(this.onBeforeHeaderCellDestroy,{node:l[0],column:o});l.attr("title",i||"").children().eq(0).html(e);this.trigger(this.onHeaderCellRendered,{node:l[0],column:o})}getHeader(){return this._headerColsL}
getHeaderColumn(t){var e=typeof t==="number"?t:this.getColumnIndex(t);if(e==null)return null;var i=$([this._headerColsL,this._headerColsR]).children().eq(e);return i&&i[0]}getGroupingPanel(){return this._groupingPanel}getHeaderRow(){return this._headerRowColsL}getHeaderRowColumn(t){var e=this.getColumnIndex(t);if(e==null)return;var i,s=this._frozenCols;if(s<=0||e<s){i=this._headerRowColsL}else{i=this._headerRowColsR;e-=s}return i.childNodes.item(e)}getFooterRow(){return this._footerRowColsL}getFooterRowColumn(t){var e=this.getColumnIndex(t);if(e==null)return null;var i,s=this._frozenCols;if(s<=0||e<s){i=this._footerRowColsL}else{i=this._footerRowR;e-=s}return i.childNodes.item(e)}createColumnFooters(){var t=this;$([this._footerRowColsL,this._footerRowR]).find(".slick-footerrow-column").each((function(){var e=$(t).data("column");if(e){t.trigger(t.onBeforeFooterRowCellDestroy,{node:this,column:e})}}));$(this._footerRowColsL).empty();$(this._footerRowR).empty()
;var e=this._cols,i=this._frozenCols;for(var s=0;s<e.length;s++){var o=e[s];var l=$("<div class='"+(this._options.useLegacyUI?"ui-state-default ":"")+"slick-footerrow-column l"+s+" r"+s+"'></div>").data("column",o).addClass(o.footerCssClass||o.cssClass||"").addClass(s<i?"frozen":"").appendTo(i>0&&s>=i?this._footerRowR:this._footerRowColsL);this.trigger(this.onFooterRowCellRendered,{node:l[0],column:o})}}formatGroupTotal(t,e){if(e.formatter!=null){var i=new a;i[e.field]=t;try{return e.formatter(-1,-1,t,e,i)}catch(t){}}if(typeof t=="number"&&typeof Q!=="undefined"&&Q.formatNumber){if(e.sourceItem&&e.sourceItem.displayFormat){return Q.formatNumber(t,e.sourceItem.displayFormat)}else return Q.formatNumber(t,"#,##0.##")}else return L(t==null?void 0:t.toString())}groupTotalText(t,e,i){var s=i.substring(0,1).toUpperCase()+i.substring(1);var o=typeof Q!=="undefined"&&Q.tryGetText&&Q.tryGetText(s)||s;var l=t[i][e.field];l=this.formatGroupTotal(l,e)
;return"<span class='aggregate agg-"+i+"'  title='"+o+"'>"+l+"</span>"}groupTotalsFormatter(t,e){if(!t||!e)return"";var i=null;var s=this;["sum","avg","min","max","cnt"].forEach((function(o){if(i==null&&t[o]&&t[o][e.field]!=null){i=s.groupTotalText(t,e,o);return false}}));return i||""}createColumnHeaders(){var t=this;$([this._headerColsL,this._headerColsR]).find(".slick-header-column").each((function(){var e=$(t).data("column");if(e){t.trigger(t.onBeforeHeaderCellDestroy,{node:this,column:e})}}));$(this._headerColsL).empty();$(this._headerColsR).empty();this.calcHeaderWidths();this._headerColsL.style.width=this._headersWidthL+"px";this._headerColsR.style.width=this._headersWidthR+"px";$([this._headerRowColsL,this._headerRowColsR]).find(".slick-headerrow-column").each((function(){var e=$(this).data("column");if(e){t.trigger(t.onBeforeHeaderRowCellDestroy,{node:this,column:e})}}));$(this._headerRowColsL).empty();$(this._headerRowColsR).empty();var e=this._cols,i=this._frozenCols
;for(var s=0;s<e.length;s++){var o=e[s];var l=i>0&&s>=i?this._headerColsR:this._headerColsL;var r=$("<div class='"+(this._options.useLegacyUI?"ui-state-default ":"")+"slick-header-column' />").html("<span class='slick-column-name'>"+o.name+"</span>").width(o.width-this._headerColumnWidthDiff).attr("id",""+this._uid+o.id).attr("title",o.toolTip||"").data("column",o).addClass(o.headerCssClass||"").addClass(s<i?"frozen":"").appendTo(l);if((this._options.enableColumnReorder||o.sortable)&&this._options.useLegacyUI){r.on("mouseenter",H).on("mouseleave",T)}if(o.sortable){r.addClass("slick-header-sortable");r.append("<span class='slick-sort-indicator' />")}this.trigger(this.onHeaderCellRendered,{node:r[0],column:o});if(this._options.showHeaderRow){var h=i>0&&s>=i?this._headerRowColsR:this._headerRowColsL;var a=$("<div class='"+(this._options.useLegacyUI?"ui-state-default ":"")+"slick-headerrow-column l"+s+" r"+s+"'></div>").data("column",o).appendTo(h)
;this.trigger(this.onHeaderRowCellRendered,{node:a[0],column:o})}}this.setSortColumns(this._sortColumns);this.setupColumnResize();if(this._options.enableColumnReorder)this.setupColumnReorder()}setupColumnSort(){$([this._headerColsL,this._headerColsR]).click((t=>{t.metaKey=t.metaKey||t.ctrlKey;if($(t.target).hasClass("slick-resizable-handle")){return}var e=$(t.target).closest(".slick-header-column");if(!e.length){return}var i=e.data("column");if(i.sortable){if(!this.getEditorLock().commitCurrentEdit()){return}var s=null;var o=0;for(;o<this._sortColumns.length;o++){if(this._sortColumns[o].columnId==i.id){s=this._sortColumns[o];s.sortAsc=!s.sortAsc;break}}if(t.metaKey&&this._options.multiColumnSort){if(s){this._sortColumns.splice(o,1)}}else{if(!t.shiftKey&&!t.metaKey||!this._options.multiColumnSort){this._sortColumns=[]}if(!s){s={columnId:i.id,sortAsc:i.defaultSortAsc};this._sortColumns.push(s)}else if(this._sortColumns.length==0){this._sortColumns.push(s)}}
this.setSortColumns(this._sortColumns);if(!this._options.multiColumnSort){this.trigger(this.onSort,{multiColumnSort:false,sortCol:i,sortAsc:s.sortAsc},t)}else{var l=this._initCols;this.trigger(this.onSort,{multiColumnSort:true,sortCols:this._sortColumns.map((t=>({sortCol:l[this.getInitialColumnIndex(t.columnId)],sortAsc:t.sortAsc})))},t)}}}))}setupColumnReorder(){$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy");var t=null;var e=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft+10};var i=()=>{this._scrollContainerX.scrollLeft=this._scrollContainerX.scrollLeft-10};var s;var o=this._options.groupingPanel;$([this._headerColsL,this._headerColsR]).sortable({containment:o?void 0:"parent",distance:3,axis:o?void 0:"x",cursor:"default",tolerance:"intersection",helper:"clone",placeholder:"slick-sortable-placeholder"+(this._options.useLegacyUI?" ui-state-default":"")+" slick-header-column",forcePlaceholderSize:o?true:void 0,
appendTo:o?"body":void 0,start:(t,e)=>{e.placeholder.width(e.helper.outerWidth()-this._headerColumnWidthDiff);s=!this.hasFrozenColumns()||e.placeholder.offset()[this._rtlS]+Math.round(e.placeholder.width())>$(this._scrollContainerX).offset()[this._rtlS];$(e.helper).addClass("slick-header-column-active")},beforeStop:(t,e)=>{$(e.helper).removeClass("slick-header-column-active");if(o){var i=$(this.getGroupingPanel());var s=i.find(".slick-dropped-grouping").length;if(s>0){i.find(".slick-dropped-placeholder").hide();i.find(".slick-dropped-grouping").show()}}},sort:o=>{if(s&&o.originalEvent.pageX>this._container.clientWidth){if(!t){t=setInterval(e,100)}}else if(s&&o.originalEvent.pageX<$(this._scrollContainerX).offset().left){if(!t){t=setInterval(i,100)}}else{clearInterval(t);t=null}},stop:e=>{var i=false;clearInterval(t);t=null;if(i||!this.getEditorLock().commitCurrentEdit()){$(e.target).sortable("cancel");return}
var s=E(this._initCols,this._headerColsL.sortable("toArray").map((t=>t.substring(this._uid.length))));s=E(s,this._headerColsR.sortable("toArray").map((t=>t.substring(this._uid.length))));this.setColumns(s);this.trigger(this.onColumnsReordered,{});e.stopPropagation();this.setupColumnResize()}})}setupColumnResize(){var t,e,i,s,o,l,r,h,a,n,d=this._cols;l=$([this._headerColsL,this._headerColsR]).children();l.find(".slick-resizable-handle").remove();l.each((t=>{if(d[t].resizable){if(a===void 0){a=t}n=t}}));if(a===void 0){return}l.each(((c,u)=>{if(c<a||this._options.forceFitColumns&&c>=n){return}t=$(u);$("<div class='slick-resizable-handle' />").appendTo(u).on("dragstart",((t,i)=>{if(!this.getEditorLock().commitCurrentEdit()){return false}o=t.pageX;$(t.target).parent().addClass("slick-header-column-active");var a=null,n=null;l.each(((t,e)=>{d[t].previousWidth=$(e).outerWidth()}));if(this._options.forceFitColumns){a=0;n=0;for(e=c+1;e<l.length;e++){s=d[e];if(s.resizable){if(n!=null){
if(s.maxWidth){n+=s.maxWidth-s.previousWidth}else{n=null}}a+=s.previousWidth-Math.max(s.minWidth||0,this._absoluteColMinWidth)}}}var u=0,_=0;for(e=0;e<=c;e++){s=d[e];if(s.resizable){if(_!=null){if(s.maxWidth){_+=s.maxWidth-s.previousWidth}else{_=null}}u+=s.previousWidth-Math.max(s.minWidth||0,this._absoluteColMinWidth)}}if(a===null){a=1e5}if(u===null){u=1e5}if(n===null){n=1e5}if(_===null){_=1e5}h=o+Math.min(a,_);r=o-Math.min(u,n)})).on("drag",((t,a)=>{var n,u=Math.min(h,Math.max(r,t.pageX))-o,_;if(u<0){_=u;var p=0,f=0;for(e=c;e>=0;e--){s=d[e];if(s.resizable){n=Math.max(s.minWidth||0,this._absoluteColMinWidth);if(_&&s.previousWidth+_<n){_+=s.previousWidth-n;s.width=n}else{s.width=s.previousWidth+_;_=0}}}var v=this._frozenCols;for(i=0;i<=c;i++){s=d[i];if(v>0&&i>=v){f+=s.width}else{p+=s.width}}if(this._options.forceFitColumns){_=-u;for(e=c+1;e<l.length;e++){s=d[e];if(s.resizable){if(_&&s.maxWidth&&s.maxWidth-s.previousWidth<_){_-=s.maxWidth-s.previousWidth;s.width=s.maxWidth}else{
s.width=s.previousWidth+_;_=0}if(v>0&&e>=v){f+=s.width}else{p+=s.width}}}}else{for(e=c+1;e<l.length;e++){s=d[e];if(v>=0&&e>=v){f+=s.width}else{p+=s.width}}}}else{_=u;var p=0,f=0;for(e=c;e>=0;e--){s=d[e];if(s.resizable){if(_&&s.maxWidth&&s.maxWidth-s.previousWidth<_){_-=s.maxWidth-s.previousWidth;s.width=s.maxWidth}else{s.width=s.previousWidth+_;_=0}}}for(i=0;i<=c;i++){s=d[i];if(v>0&&i>=v){f+=s.width}else{p+=s.width}}if(this._options.forceFitColumns){_=-u;for(e=c+1;e<l.length;e++){s=d[e];if(s.resizable){n=Math.max(s.minWidth||0,this._absoluteColMinWidth);if(_&&s.previousWidth+_<n){_+=s.previousWidth-n;s.width=n}else{s.width=s.previousWidth+_;_=0}if(v&&e>=v){f+=s.width}else{p+=s.width}}}}else{for(e=c+1;e<l.length;e++){s=d[e];if(v>0&&e>=v){f+=s.width}else{p+=s.width}}}}if(this.hasFrozenColumns()&&p!=this._canvasWidthL){this._headerColsL.style.width=p+1e3+"px";this._paneHeaderR.style[this._rtlS]=p+"px"}this.applyColumnHeaderWidths();if(this._options.syncColumnCellResize){
this.applyColumnWidths()}})).on("dragend",(t=>{var i;$(t.target).parent().removeClass("slick-header-column-active");for(e=0;e<l.length;e++){s=d[e];i=$(l[e]).outerWidth();if(s.previousWidth!==i&&s.rerenderOnResize){this.invalidateAllRows()}}this.updateCanvasWidth(true);this.render();this.trigger(this.onColumnsResized)}))}))}getVBoxDelta(t){if(t.css("box-sizing")=="border-box")return 0;var e=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var i=0;$.each(e,(function(e,s){i+=parseFloat(t.css(s))||0}));return i}adjustFrozenRowOption(){this._options.frozenRow=this._options.frozenRow>=0&&this._options.frozenRow<this._numVisibleRows?this._options.frozenRow:-1;if(this._options.frozenRow>-1){this._hasFrozenRows=true;this._frozenRowsHeight=this._options.frozenRow*this._options.rowHeight;var t=this.getDataLength()||this._data.length;this._actualFrozenRow=this._options.frozenBottom?t-this._options.frozenRow:this._options.frozenRow}else{this._hasFrozenRows=false}}
setPaneVisibility(){this._paneHeaderR.style.display=this._paneTopR.style.display=this._hasFrozenRows?"":"none";this._paneBottomL.style.display=this._hasFrozenRows?"":"none";this._paneBottomR.style.display=this._hasFrozenRows&&this.hasFrozenColumns()?"":"none"}setOverflow(){var t=this._hasFrozenRows;var e=this.hasFrozenColumns();var i=this._options.alwaysAllowHorizontalScroll;var s=this._options.alwaysShowVerticalScroll;this._viewportTopL.style.overflowX=this._viewportTopR.style.overflowX=t&&!i?"hidden":e?"scroll":"auto";this._viewportTopL.style.overflowY=this._viewportBottomL.style.overflowY=!e&&s?"scroll":e?"hidden":t?"scroll":"auto";this._viewportTopR.style.overflowY=s||t?"scroll":"auto";this._viewportBottomL.style.overflowX=this._viewportBottomR.style.overflowX=e&&!i?"scroll":"auto";this._viewportBottomR.style.overflowY=s?"scroll":"auto";if(this._options.viewportClass)this.getViewports().toggleClass(this._options.viewportClass,true)}setScroller(){if(this.hasFrozenColumns()){
if(this._hasFrozenRows){if(this._options.frozenBottom){this._scrollContainerX=this._viewportBottomR;this._scrollContainerY=this._viewportTopR}else{this._scrollContainerX=this._scrollContainerY=this._viewportBottomR}}else{this._scrollContainerX=this._scrollContainerY=this._viewportTopR}}else{if(this._hasFrozenRows){if(this._options.frozenBottom){this._scrollContainerX=this._viewportBottomL;this._scrollContainerY=this._viewportTopL}else{this._scrollContainerX=this._scrollContainerY=this._viewportBottomL}}else{this._scrollContainerX=this._scrollContainerY=this._viewportTopL}}}measureCellPaddingAndBorder(){var t;var e=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"];var i=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"];var s=$.fn.jquery.split(".");this._jQueryNewWidthBehaviour=s[0]=="1"&&s[1]>=8||s[0]>=2
;t=$("<div class='"+(this._options.useLegacyUI?"ui-state-default ":"")+"slick-header-column' style='visibility:hidden'>-</div>").appendTo(this._headerColsL);this._headerColumnWidthDiff=0;if(t.css("box-sizing")!="border-box"&&t.css("-moz-box-sizing")!="border-box"&&t.css("-webkit-box-sizing")!="border-box"){$.each(e,((e,i)=>{this._headerColumnWidthDiff+=parseFloat(t.css(i))||0}))}t.remove();var o=$("<div class='slick-row' />").appendTo(this._canvasTopL);t=$("<div class='slick-cell' id='' style='visibility:hidden'>-</div>").appendTo(o);this._cellWidthDiff=this._cellHeightDiff=0;if(t.css("box-sizing")!="border-box"&&t.css("-moz-box-sizing")!="border-box"&&t.css("-webkit-box-sizing")!="border-box"){$.each(e,((e,i)=>{this._cellWidthDiff+=parseFloat(t.css(i))||0}));$.each(i,((e,i)=>{this._cellHeightDiff+=parseFloat(t.css(i))||0}))}o.remove();this._absoluteColMinWidth=Math.max(this._headerColumnWidthDiff,this._cellWidthDiff)}createCssRules(){
var t=this._styleNode=document.createElement("style");t.dataset.uid=this._uid;var e=this._options.rowHeight-this._cellHeightDiff;var i=["."+this._uid+" .slick-group-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-header-column { "+this._rtlS+": 1000px; }","."+this._uid+" .slick-top-panel { height:"+this._options.topPanelHeight+"px; }","."+this._uid+" .slick-grouping-panel { height:"+this._options.groupingPanelHeight+"px; }","."+this._uid+" .slick-headerrow-columns { height:"+this._options.headerRowHeight+"px; }","."+this._uid+" .slick-cell { height:"+e+"px; }","."+this._uid+" .slick-row { height:"+this._options.rowHeight+"px; }","."+this._uid+" .slick-footerrow-columns { height:"+this._options.footerRowHeight+"px; }"];var s=this._cols;for(var o=0;o<s.length;o++){i.push("."+this._uid+" .l"+o+" { }");i.push("."+this._uid+" .r"+o+" { }")}t.appendChild(document.createTextNode(i.join(" ")));document.head.appendChild(t)}getColumnCssRules(t){if(!this._stylesheet){
var e=document.querySelector("style[data-uid='"+this._uid+"']");if(e&&e.sheet){this._stylesheet=e.sheet}else{var i=document.styleSheets;for(var s=0;s<i.length;s++){if((i[s].ownerNode||i[s].owningElement)==this._styleNode){this._stylesheet=i[s];break}}}if(!this._stylesheet){throw new Error("Cannot find stylesheet.")}this._columnCssRulesL=[];this._columnCssRulesR=[];var o=this._stylesheet.cssRules||this._stylesheet.rules;var l,r;for(var s=0;s<o.length;s++){var h=o[s].selectorText;if(l=/\.l\d+/.exec(h)){r=parseInt(l[0].substring(2,l[0].length),10);this._columnCssRulesL[r]=o[s]}else if(l=/\.r\d+/.exec(h)){r=parseInt(l[0].substring(2,l[0].length),10);this._columnCssRulesR[r]=o[s]}}}return this._rtl?{right:this._columnCssRulesL[t],left:this._columnCssRulesR[t]}:{left:this._columnCssRulesL[t],right:this._columnCssRulesR[t]}}removeCssRules(){this._styleNode.remove();this._stylesheet=null}destroy(){this.getEditorLock().cancelCurrentEdit();this.trigger(this.onBeforeDestroy)
;var t=this._plugins.length;while(t--){this.unregisterPlugin(this._plugins[t])}if(this._options.enableColumnReorder){$([this._headerColsL,this._headerColsR]).filter(":ui-sortable").sortable("destroy")}this.unbindAncestorScrollEvents();$(this._container).off(".slickgrid");this.removeCssRules();this.getCanvases().off("draginit dragstart dragend drag");$(this._container).empty().removeClass(this._uid);for(var e in this){if(!Object.prototype.hasOwnProperty.call(this,e))continue;if(e.startsWith("on")){var i=this[e];if((i==null?void 0:i.clear)&&(i==null?void 0:i.subscribe))i==null?void 0:i.clear()}delete this[e]}}trigger(t,e,i){i=i||new u;e=e||{};e.grid=this;return t.notify(e,i,this)}getEditorLock(){return this._options.editorLock}getEditController(){return this._editController}getColumnIndex(t){return this._colById[t]}getInitialColumnIndex(t){return this._initColById[t]}autosizeColumns(){
var t,e,i=[],s=0,o=0,l,r=this._viewportHasVScroll?this._viewportW-this._scrollDims.width:this._viewportW,h=this._cols;for(t=0;t<h.length;t++){e=h[t];i.push(e.width);o+=e.width;if(e.resizable){s+=e.width-Math.max(e.minWidth,this._absoluteColMinWidth)}}l=o;while(o>r&&s){var a=(o-r)/s;for(t=0;t<h.length&&o>r;t++){e=h[t];var n=i[t];if(!e.resizable||n<=e.minWidth||n<=this._absoluteColMinWidth){continue}var d=Math.max(e.minWidth,this._absoluteColMinWidth);var c=Math.floor(a*(n-d))||1;c=Math.min(c,n-d);o-=c;s-=c;i[t]-=c}if(l<=o){break}l=o}l=o;while(o<r){var u=r/o;for(t=0;t<h.length&&o<r;t++){e=h[t];var _=i[t];var p;if(!e.resizable||e.maxWidth<=_){p=0}else{p=Math.min(Math.floor(u*_)-_,e.maxWidth-_||1e6)||1}o+=p;i[t]+=o<=r?p:0}if(l>=o){break}l=o}var f=false;for(t=0;t<h.length;t++){if(h[t].rerenderOnResize&&h[t].width!=i[t]){f=true}h[t].width=i[t]}this.applyColumnHeaderWidths();this.updateCanvasWidth(true);if(f){this.invalidateAllRows();this.render()}}applyColumnHeaderWidths(){
if(!this._initialized){return}var t,e=this._cols;for(var i=0,s=$([this._headerColsL,this._headerColsR]).children(),o=s.length;i<o;i++){t=$(s[i]);if(this._jQueryNewWidthBehaviour){if(t.outerWidth()!==e[i].width){t.outerWidth(e[i].width)}}else{if(Math.round(t.width())!==e[i].width-this._headerColumnWidthDiff){t.width(e[i].width-this._headerColumnWidthDiff)}}}this.updateViewColLeftRight()}applyColumnWidths(){var t=0,e,i,s=this._cols,o=this._frozenCols;for(var l=0;l<s.length;l++){if(o==l)t=0;e=s[l].width;i=this.getColumnCssRules(l);i[this._rtlS].style[this._rtlS]=t+"px";i[this._rtlE].style[this._rtlE]=(o>0&&l>=o?this._canvasWidthR:this._canvasWidthL)-t-e+"px";t+=e}}setSortColumn(t,e){this.setSortColumns([{columnId:t,sortAsc:e}])}setSortColumns(t){this._sortColumns=t||[];var e=$([this._headerColsL,this._headerColsR]).children();e.removeClass("slick-header-column-sorted").find(".slick-sort-indicator").removeClass("slick-sort-indicator-asc slick-sort-indicator-desc")
;$.each(this._sortColumns,((t,i)=>{if(i.sortAsc==null){i.sortAsc=true}var s=this.getColumnIndex(i.columnId);if(s!=null){e.eq(s).addClass("slick-header-column-sorted").find(".slick-sort-indicator").addClass(i.sortAsc?"slick-sort-indicator-asc":"slick-sort-indicator-desc")}}))}getSortColumns(){return this._sortColumns}getColumns(){return this._cols}getInitialColumns(){return this._initCols}updateViewColLeftRight(){this._colLeft=[];this._colRight=[];var t=0,e,i=this._cols,s,o=i.length,l=this._frozenCols;for(var s=0;s<o;s++){if(l===s)t=0;e=t+i[s].width;this._colLeft[s]=t;this._colRight[s]=e;t=e}}setInitialCols(t){var e=this._colDefaults;var i={};var s=[];var o=[];var l={};var r,h,a;for(r=0;r<t.length;r++){h=t[r];for(a in e){if(h[a]===void 0)h[a]=this._colDefaults[a]}if(h.minWidth&&h.width<h.minWidth){h.width=h.minWidth}if(h.maxWidth&&h.width>h.maxWidth){h.width=h.maxWidth}i[h.id]=r;if(h.visible!==false){(h.frozen?s:o).push(h)}}this._frozenCols=s.length;if(s.length>0)o=s.concat(o)
;for(r=0;r<o.length;r++){h=o[r];l[h.id]=r}this._initCols=t;this._initColById=i;this._cols=o;this._colById=l}setColumns(t){var e;this.setInitialCols(t);this.updateViewColLeftRight();if(this._initialized){this.setPaneVisibility();this.setOverflow();this.invalidateAllRows();this.createColumnHeaders();this.createColumnFooters();this.updateFooterTotals();this.removeCssRules();this.createCssRules();this.resizeCanvas();this.updateCanvasWidth();this.applyColumnWidths();this.handleScroll();(e=this.getSelectionModel())==null?void 0:e.refreshSelections()}}getOptions(){return this._options}setOptions(t,e,i,s){var o;if(!this.getEditorLock().commitCurrentEdit()){return}this.makeActiveCellNormal();if(t.showColumnHeader!==void 0){this.setColumnHeaderVisibility(t.showColumnHeader)}if(this._options.enableAddRow!==t.enableAddRow){this.invalidateRow(this.getDataLength())}this._options=$.extend(this._options,t);this.validateAndEnforceOptions();this.adjustFrozenRowOption()
;this.getViewports().css("overflow-y",this._options.autoHeight?"hidden":"auto");if(!s){this.setOverflow()}if(t.columns&&!i){g(t.columns,this._options);this.setColumns((o=t.columns)!=null?o:this._initCols)}else if(t.frozenColumn!=null){g(this._initCols,this._options);this.setColumns(this._initCols)}this.setScroller();if(!e)this.render()}validateAndEnforceOptions(){if(this._options.autoHeight){this._options.leaveSpaceForNewRows=false}}bindToData(){if(this._data){this._data.onRowCountChanged&&this._data.onRowCountChanged.subscribe(this.viewOnRowCountChanged);this._data.onRowsChanged&&this._data.onRowsChanged.subscribe(this.viewOnRowsChanged);this._data.onDataChanged&&this._data.onDataChanged.subscribe(this.viewOnDataChanged)}}unbindFromData(){if(this._data){this._data.onRowCountChanged&&this._data.onRowCountChanged.unsubscribe(this.viewOnRowCountChanged);this._data.onRowsChanged&&this._data.onRowsChanged.unsubscribe(this.viewOnRowsChanged)
;this._data.onDataChanged&&this._data.onDataChanged.unsubscribe(this.viewOnDataChanged)}}setData(t,e){this.unbindFromData();this._data=t;this.bindToData();this.invalidateAllRows();this.updateRowCount();if(e){this.scrollTo(0)}}getData(){return this._data}getDataLength(){if(this._data.getLength){return this._data.getLength()}else{return this._data.length}}getDataLengthIncludingAddNew(){return this.getDataLength()+(!this._options.enableAddRow?0:!this._pagingActive||this._pagingIsLastPage?1:0)}getDataItem(t){if(this._data.getItem){return this._data.getItem(t)}else{return this._data[t]}}getTopPanel(){return this._topPanelL}setTopPanelVisibility(t){if(this._options.showTopPanel!=t){this._options.showTopPanel=!!t;$([this._topPanelL.parentElement,this._topPanelR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas.bind(this))}}setColumnHeaderVisibility(t,e){if(this._options.showColumnHeader!=t){this._options.showColumnHeader=t
;var i=$([this._headerColsL.parentElement,this._headerColsR.parentElement]);if(t){if(e){i.slideDown("fast",this.resizeCanvas.bind(this))}else{i.show();this.resizeCanvas()}}else{if(e){i.slideUp("fast",this.resizeCanvas.bind(this))}else{i.hide();this.resizeCanvas()}}}}setFooterRowVisibility(t){if(this._options.showFooterRow!=t){this._options.showFooterRow=!!t;$([this._footerRowColsL.parentElement,this._footerRowR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas.bind(this))}}setGroupingPanelVisibility(t){if(this._options.showGroupingPanel!=t){this._options.showGroupingPanel=t;if(!this._options.groupingPanel)return;if(t){$(this._groupingPanel).slideDown("fast",this.resizeCanvas.bind(this))}else{$(this._groupingPanel).slideUp("fast",this.resizeCanvas.bind(this))}}}setHeaderRowVisibility(t){if(this._options.showHeaderRow!=t){this._options.showHeaderRow=t
;$([this._headerRowColsL.parentElement,this._headerRowColsR.parentElement])[t?"slideDown":"slideUp"]("fast",this.resizeCanvas.bind(this))}}getContainerNode(){return this._container}getUID(){return this._uid}getRowTop(t){return this._options.rowHeight*t-this._pageOffset}getRowFromPosition(t){return Math.floor((t+this._pageOffset)/this._options.rowHeight)}scrollTo(t){t=Math.max(t,0);t=Math.min(t,this._virtualHeight-Math.round($(this._scrollContainerY).height())+(this._viewportHasHScroll||this.hasFrozenColumns()?this._scrollDims.height:0));var e=this._pageOffset;this._page=Math.min(this._numberOfPages-1,Math.floor(t/this._pageHeight));this._pageOffset=Math.round(this._page*this._jumpinessCoefficient);var i=t-this._pageOffset;if(this._pageOffset!=e){var s=this.getVisibleRange(i);this.cleanupRows(s);this.updateRowPositions()}if(this._scrollTopPrev!=i){this._vScrollDir=this._scrollTopPrev+e<i+this._pageOffset?1:-1;this._scrollTopRendered=this._scrollTop=this._scrollTopPrev=i
;if(this.hasFrozenColumns()){this._viewportTopL.scrollTop=i}if(this._hasFrozenRows){this._viewportBottomL.scrollTop=this._viewportBottomR.scrollTop=i}this._scrollContainerY.scrollTop=i;this.trigger(this.onViewportChanged)}}getFormatter(t,e){var i=this._data;var s=i.getItemMetadata&&i.getItemMetadata(t);var o=s&&s.columns;var l=o&&(o[e.id]||o[this.getInitialColumnIndex(e.id)]);return l&&l.formatter||s&&s.formatter||e.formatter||this._options.formatterFactory&&this._options.formatterFactory.getFormatter(e)||this._options.defaultFormatter}getEditor(t,e){var i=this._cols[e];var s=this._data.getItemMetadata&&this._data.getItemMetadata(t);var o=s&&s.columns;if(o&&o[i.id]&&o[i.id].editor!==void 0){return o[i.id].editor}if(o&&o[e]&&o[e].editor!==void 0){return o[e].editor}return i.editor||this._options.editorFactory&&this._options.editorFactory.getEditor(i)}getDataItemValueForColumn(t,e){if(this._options.dataItemColumnValueExtractor){return this._options.dataItemColumnValueExtractor(t,e)}
return t[e.field]}appendRowHtml(t,e,i,s,o){var l=this.getDataItem(i);var r=i<o&&!l;var h="slick-row"+(this._hasFrozenRows&&i<=this._options.frozenRow?" frozen":"")+(r?" loading":"")+(i===this._activeRow?" active":"")+(i%2==1?" odd":" even");if(!l){h+=" "+this._options.addNewRowCssClass}var a=this._data.getItemMetadata&&this._data.getItemMetadata(i);if(a&&a.cssClasses){h+=" "+a.cssClasses}var n=this.getFrozenRowOffset(i);var d="<div class='"+(this._options.useLegacyUI?"ui-widget-content ":"")+h+"' style='top:"+(this.getRowTop(i)-n)+"px'>";t.push(d);if(this.hasFrozenColumns()){e.push(d)}var c,u,_=this._cols,p=this._frozenCols;for(var f=0,v=_.length;f<v;f++){var g=null;u=_[f];c=1;if(a&&a.columns){g=a.columns[u.id]||a.columns[f];c=g&&g.colspan||1;if(c==="*"){c=v-f}}if(this._colRight[Math.min(v-1,f+c-1)]>s.leftPx){if(this._colLeft[f]>s.rightPx){break}this.appendCellHtml(p>0&&f>=p?e:t,i,f,c,l,g)}if(c>1){f+=c-1}}t.push("</div>");if(this.hasFrozenColumns()){e.push("</div>")}}
appendCellHtml(t,e,i,s,o,l){var r,h,a;var n=this._cols,d=this._frozenCols,c=n[i];var u="slick-cell l"+i+" r"+Math.min(n.length-1,i+s-1)+(c.cssClass?" "+c.cssClass:"");if(i<d)u+=" frozen";if(e===this._activeRow&&i===this._activeCell)u+=" active";if(l&&l.cssClasses){u+=" "+l.cssClasses}for(var _ in this._cellCssClasses){if(this._cellCssClasses[_][e]&&this._cellCssClasses[_][e][c.id]){u+=" "+this._cellCssClasses[_][e][c.id]}}var p;if(o){var f=this.getDataItemValueForColumn(o,c);p=this.getFormatter(e,c)(e,i,f,c,o,this)}if(p==null)t.push('<div class="'+w(u)+'"></div>');else if(typeof p==="string")t.push('<div class="'+w(u)+'">'+p+"</div>");else{if((r=p.addClass)==null?void 0:r.length)u+=" "+p.addClass;t.push('<div class="'+w(u)+'"');if((h=p.addClass)==null?void 0:h.length)t.push(' data-fmtcls="'+w(p.addClass)+'"');var v=p.addAttrs;if(v!=null){var g=[];for(var C in v){t.push(C+'="'+w(v[C])+'"');g.push(C)}t.push(' data-fmtatt="'+w(g.join(","))+'"')}var m=p.toolTip
;if(m!=null&&m.length)t.push('tooltip="'+w(m)+'"');if((a=p.text)==null?void 0:a.length)t.push(">"+p.text+"</div>");else t.push("></div>")}this._rowsCache[e].cellRenderQueue.push(i);this._rowsCache[e].cellColSpans[i]=s}cleanupRows(t){var e;for(var i in this._rowsCache){var s=true;e=parseInt(i,10);if(this._hasFrozenRows&&(this._options.frozenBottom&&e>=this._actualFrozenRow||!this._options.frozenBottom&&e<=this._actualFrozenRow)){s=false}if(e!==this._activeRow&&(e<t.top||e>t.bottom)&&s){this.removeRowFromCache(e)}}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidate(){this.updateRowCount();this.invalidateAllRows();this.render();this.updateFooterTotals()}invalidateAllRows(){if(this._currentEditor){this.makeActiveCellNormal()}for(var t in this._rowsCache){this.removeRowFromCache(parseInt(t,10))}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}queuePostProcessedRowForCleanup(t,e,i){this._postProcessGroupId++;for(var s in e){
if(e.hasOwnProperty(s)){var o=parseInt(s,10);this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:t.cellNodesByColumnIdx[o|0],columnIdx:o|0,rowIdx:i})}}this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,rowNode:t.rowNode});$(t.rowNode).detach()}queuePostProcessedCellForCleanup(t,e,i){this._postProcessCleanupQueue.push({groupId:this._postProcessGroupId,cellNode:t,columnIdx:e,rowIdx:i});$(t).detach()}removeRowFromCache(t){var e=this._rowsCache[t];if(!e){return}if(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[t]){this.queuePostProcessedRowForCleanup(e,this._postProcessedRows[t],t)}else{e.rowNode.each((function(){if(this.parentElement)this.parentElement.removeChild(this)}))}delete this._rowsCache[t];delete this._postProcessedRows[t]}invalidateRows(t){var e,i;if(!t||!t.length){return}this._vScrollDir=0;for(e=0,i=t.length;e<i;e++){if(this._currentEditor&&this._activeRow===t[e]){this.makeActiveCellNormal()}
if(this._rowsCache[t[e]]){this.removeRowFromCache(t[e])}}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup()}invalidateRow(t){this.invalidateRows([t])}applyFormatResultToCellNode(t,e){var i,s,o,l;var r=(i=e.dataset)==null?void 0:i.fmtcls;if(r!=null&&r.length>0){e.classList.remove(...r.split(" "));delete e.dataset.fmtcls}var h=(s=e.dataset)==null?void 0:s.fmtatt;if(h!=null&&h.length>0){for(var a of h.split(","))e.removeAttribute(a);delete e.dataset.fmtatt}e.removeAttribute("tooltip");if(t==null){e.innerHTML="";return}if(typeof t==="string"){e.innerHTML=t;return}e.innerHTML=t.text;if((o=t.addClass)==null?void 0:o.length){e.classList.add(...t.addClass.split(" "));e.dataset.fmtcls=t.addClass}if(t.addAttrs!=null){var n=Object.keys(t.addAttrs);if(n.length){for(var a of n){e.setAttribute(a,t.addAttrs[a])}e.dataset.fmtatt=n.join(",")}}if((l=t.toolTip)==null?void 0:l.length)e.setAttribute("tooltip",t.toolTip)}updateCell(t,e){var i=this.getCellNode(t,e);if(!i){return}
var s=this._cols[e],o=this.getDataItem(t);if(this._currentEditor&&this._activeRow===t&&this._activeCell===e){this._currentEditor.loadValue(o)}else{var l=o?this.getFormatter(t,s)(t,e,this.getDataItemValueForColumn(o,s),s,o):"";this.applyFormatResultToCellNode(l,i);this.invalidatePostProcessingResults(t)}}updateRow(t){var e=this._rowsCache[t];if(!e){return}this.ensureCellNodesInRowsCache(t);var i=this.getDataItem(t);var s;for(var o in e.cellNodesByColumnIdx){if(!e.cellNodesByColumnIdx.hasOwnProperty(o)){continue}var l=parseInt(o,10);var r=this._cols[l],h=e.cellNodesByColumnIdx[l];if(t===this._activeRow&&l===this._activeCell&&this._currentEditor){this._currentEditor.loadValue(i)}else{s=i?this.getFormatter(t,r)(t,l,this.getDataItemValueForColumn(i,r),r,i):"";this.applyFormatResultToCellNode(s,h)}}this.invalidatePostProcessingResults(t)}getViewportHeight(){if(!this._options.autoHeight||this.hasFrozenColumns()){
this._topPanelH=this._options.showTopPanel?this._options.topPanelHeight+this.getVBoxDelta($(this._topPanelL.parentElement)):0;this._headerRowH=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta($(this._headerRowColsL.parentElement)):0;this._footerRowH=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta($(this._footerRowColsL.parentElement)):0}if(this._options.autoHeight){this._viewportH=this._options.rowHeight*this.getDataLengthIncludingAddNew();if(!this.hasFrozenColumns()){this._viewportH+=$(this._paneHeaderL).outerHeight();this._viewportH+=this._options.showHeaderRow?this._options.headerRowHeight+this.getVBoxDelta($(this._headerRowColsL.parentElement)):0;this._viewportH+=this._options.showFooterRow?this._options.footerRowHeight+this.getVBoxDelta($(this._footerRowColsL.parentElement)):0;this._viewportH+=this.getCanvasWidth()>this._viewportW?this._scrollDims.height:0}}else{
var t=this._options.showColumnHeader?parseFloat($.css(this._headerColsL.parentElement,"height"))+this.getVBoxDelta($(this._headerColsL.parentElement)):0;this._groupingPanelH=this._options.groupingPanel&&this._options.showGroupingPanel?this._options.groupingPanelHeight+this.getVBoxDelta($(this._groupingPanel)):0;this._viewportH=parseFloat($.css(this._container,"height",true))-parseFloat($.css(this._container,"paddingTop",true))-parseFloat($.css(this._container,"paddingBottom",true))-t-this._topPanelH-this._headerRowH-this._footerRowH-this._groupingPanelH}this._numVisibleRows=Math.ceil(this._viewportH/this._options.rowHeight);return this._viewportH}getViewportWidth(){this._viewportW=parseFloat($.css(this._container,"width",true))}resizeCanvas(){if(!this._initialized){return}this._paneTopH=0;this._paneBottomH=0;this._viewportTopH=0;this.getViewportWidth();this.getViewportHeight();if(this._hasFrozenRows){if(this._options.frozenBottom){
this._paneTopH=this._viewportH-this._frozenRowsHeight-this._scrollDims.height;this._paneBottomH=this._frozenRowsHeight+this._scrollDims.height}else{this._paneTopH=this._frozenRowsHeight;this._paneBottomH=this._viewportH-this._frozenRowsHeight}}else{this._paneTopH=this._viewportH}this._paneTopH+=this._topPanelH+this._headerRowH+this._footerRowH;if(this.hasFrozenColumns()&&this._options.autoHeight){this._paneTopH+=this._scrollDims.height}this._viewportTopH=this._paneTopH-this._topPanelH-this._headerRowH-this._footerRowH;if(this._options.autoHeight){if(this.hasFrozenColumns()){this._container.style.height=this._paneTopH+parseFloat($.css(this._headerColsL.parentElement,"height"))+"px"}this._paneTopL.style.position="relative"}else this._paneTopL.style.position="";this._paneTopL.style.top=($(this._paneHeaderL).height()||(this._options.showHeaderRow?this._options.headerRowHeight:0)+this._groupingPanelH)+"px";this._paneTopL.style.height=this._paneTopH+"px"
;var t=$(this._paneTopL).position().top+this._paneTopH;if(!this._options.autoHeight){this._viewportTopL.style.height=this._viewportTopH+"px"}if(this.hasFrozenColumns()){this._paneTopR.style.top=this._paneTopL.style.top;this._paneTopR.style.height=this._paneTopH+"px";this._viewportTopR.style.height=this._viewportTopH+"px";if(this._hasFrozenRows){this._paneBottomL.style.top=t+"px";this._paneBottomL.style.height=this._paneBottomH+"px";this._paneBottomR.style.top=t+"px";this._paneBottomR.style.height=this._paneBottomH+"px";this._viewportBottomR.style.height=this._paneBottomH+"px"}}else{if(this._hasFrozenRows){this._paneBottomL.style.width="100%";this._paneBottomL.style.height=this._paneBottomH+"px";this._paneBottomL.style.top=t+"px"}}if(this._hasFrozenRows){this._viewportBottomL.style.height=this._paneBottomH+"px";if(this._options.frozenBottom){this._canvasBottomL.style.height=this._frozenRowsHeight+"px";if(this.hasFrozenColumns()){
this._canvasBottomR.style.height=this._frozenRowsHeight+"px"}}else{this._canvasTopL.style.height=this._frozenRowsHeight+"px";if(this.hasFrozenColumns()){this._canvasTopR.style.height=this._frozenRowsHeight+"px"}}}else{this._viewportTopR.style.height=this._viewportTopH+"px"}if(!this._scrollDims||!this._scrollDims.width){this._scrollDims=y(true)}if(this._options.forceFitColumns){this.autosizeColumns()}this.updateRowCount();this.handleScroll();this._scrolLLeftRendered=-1;this.render()}updatePagingStatusFromView(t){this._pagingActive=t.pageSize!==0;this._pagingIsLastPage=t.pageNum==t.totalPages-1}updateRowCount(){if(!this._initialized){return}var t=this.getDataLengthIncludingAddNew();var e=0;var i=this._hasFrozenRows&&!this._options.frozenBottom?Math.round($(this._canvasBottomL).height()):Math.round($(this._canvasTopL).height());if(this._hasFrozenRows){var e=this.getDataLength()-this._options.frozenRow}else{var e=t+(this._options.leaveSpaceForNewRows?this._numVisibleRows-1:0)}
var s=Math.round($(this._scrollContainerY).height());var o=this._viewportHasVScroll;this._viewportHasVScroll=!this._options.autoHeight&&e*this._options.rowHeight>s;this.makeActiveCellNormal();var l=t-1;for(var r in this._rowsCache){var h=parseInt(r,10);if(h>=l){this.removeRowFromCache(h)}}this._options.enableAsyncPostRenderCleanup&&this.startPostProcessingCleanup();this._virtualHeight=Math.max(this._options.rowHeight*e,s-this._scrollDims.height);if(this._activeCellNode&&this._activeRow>l){this.resetActiveCell()}if(this._virtualHeight<R()){this._realScrollHeight=this._pageHeight=this._virtualHeight;this._numberOfPages=1;this._jumpinessCoefficient=0}else{this._realScrollHeight=R();this._pageHeight=this._realScrollHeight/100;this._numberOfPages=Math.floor(this._virtualHeight/this._pageHeight);this._jumpinessCoefficient=(this._virtualHeight-this._realScrollHeight)/(this._numberOfPages-1)}if(this._realScrollHeight!==i){if(this._hasFrozenRows&&!this._options.frozenBottom){
this._canvasBottomL.style.height=this._realScrollHeight+"px";if(this.hasFrozenColumns()){this._canvasBottomR.style.height=this._realScrollHeight+"px"}}else{this._canvasTopL.style.height=this._realScrollHeight+"px";this._canvasTopR.style.height=this._realScrollHeight+"px"}this._scrollTop=this._scrollContainerY.scrollTop}var a=this._scrollTop+this._pageOffset<=this._virtualHeight-s;if(this._virtualHeight==0||this._scrollTop==0){this._page=this._pageOffset=0}else if(a){this.scrollTo(this._scrollTop+this._pageOffset)}else{this.scrollTo(this._virtualHeight-s)}if(this._realScrollHeight!=i&&this._options.autoHeight){this.resizeCanvas()}if(this._options.forceFitColumns&&o!=this._viewportHasVScroll){this.autosizeColumns()}this.updateCanvasWidth(false)}getViewport(t,e){return this.getVisibleRange(t,e)}getVisibleRange(t,e){if(t==null){t=this._scrollTop}if(e==null){e=this._scrollLeft}return{top:this.getRowFromPosition(t),bottom:this.getRowFromPosition(t+this._viewportH)+1,leftPx:e,
rightPx:e+this._viewportW}}getRenderedRange(t,e){var i=this.getVisibleRange(t,e);var s=Math.round(this._viewportH/this._options.rowHeight);var o=this._options.minBuffer||3;if(this._vScrollDir==-1){i.top-=s;i.bottom+=o}else if(this._vScrollDir==1){i.top-=o;i.bottom+=s}else{i.top-=o;i.bottom+=o}i.top=Math.max(0,i.top);i.bottom=Math.min(this.getDataLengthIncludingAddNew()-1,i.bottom);if(this._options.renderAllCells){i.leftPx=0;i.rightPx=this._canvasWidth}else{i.leftPx-=this._viewportW;i.rightPx+=this._viewportW;i.leftPx=Math.max(0,i.leftPx);i.rightPx=Math.min(this._canvasWidth,i.rightPx)}return i}ensureCellNodesInRowsCache(t){var e=this._rowsCache[t];if(e){if(e.cellRenderQueue.length){var i=e.rowNode.children().last()[0];while(e.cellRenderQueue.length){var s=e.cellRenderQueue.pop();e.cellNodesByColumnIdx[s]=i;i=i.previousSibling;if(i==null)i=$(e.rowNode[0]).children().last()[0]}}}}cleanUpCells(t,e){
if(this._hasFrozenRows&&(this._options.frozenBottom&&e>this._actualFrozenRow||e<=this._actualFrozenRow)){return}var i=0;var s=this._rowsCache[e];var o=[],l=this._frozenCols;for(var r in s.cellNodesByColumnIdx){if(!s.cellNodesByColumnIdx.hasOwnProperty(r)){continue}var h=parseInt(r,10);if(h<l){continue}var a=s.cellColSpans[h],n=this._cols;if(this._colLeft[h]>t.rightPx||this._colRight[Math.min(n.length-1,h+a-1)]<t.leftPx){if(!(e==this._activeRow&&h===this._activeCell)){o.push(h)}}}var d,c;this._postProcessGroupId++;while((d=o.pop())!=null){c=s.cellNodesByColumnIdx[d];if(this._options.enableAsyncPostRenderCleanup&&this._postProcessedRows[e]&&this._postProcessedRows[e][d]){this.queuePostProcessedCellForCleanup(c,d,e)}else{c.parentElement.removeChild(c)}delete s.cellColSpans[d];delete s.cellNodesByColumnIdx[d];if(this._postProcessedRows[e]){delete this._postProcessedRows[e][d]}i++}}cleanUpAndRenderCells(t){var e;var i=[];var s=[];var o;var l=0;var r;var h=this._cols
;for(var a=t.top,n=t.bottom;a<=n;a++){e=this._rowsCache[a];if(!e){continue}this.ensureCellNodesInRowsCache(a);this.cleanUpCells(t,a);o=0;var d=this._data.getItemMetadata&&this._data.getItemMetadata(a);d=d&&d.columns;var c=this.getDataItem(a);for(var u=0,_=h.length;u<_;u++){if(this._colLeft[u]>t.rightPx){break}if((r=e.cellColSpans[u])!=null){u+=r>1?r-1:0;continue}var p=null;r=1;if(d){p=d[h[u].id]||d[u];r=p&&p.colspan||1;if(r==="*"){r=_-u}}if(this._colRight[Math.min(_-1,u+r-1)]>t.leftPx){this.appendCellHtml(i,a,u,r,c,p);o++}u+=r>1?r-1:0}if(o){l+=o;s.push(a)}}if(!i.length){return}var f=document.createElement("div");f.innerHTML=i.join("");var v;var g,w=this._frozenCols;while((v=s.pop())!=null){e=this._rowsCache[v];var C;while((C=e.cellRenderQueue.pop())!=null){g=f.lastChild;if(w>0&&C>=w){e.rowNode[1].appendChild(g)}else{e.rowNode[0].appendChild(g)}e.cellNodesByColumnIdx[C]=g}}}renderRows(t){var e=[],i=[],s=[],o=false,l=this.getDataLength();for(var r=t.top,h=t.bottom;r<=h;r++){
if(this._rowsCache[r]||this._hasFrozenRows&&this._options.frozenBottom&&r==l){continue}s.push(r);this._rowsCache[r]={rowNode:null,cellColSpans:[],cellNodesByColumnIdx:[],cellRenderQueue:[]};this.appendRowHtml(e,i,r,t,l);if(this._activeCellNode&&this._activeRow===r){o=true}}if(!s.length){return}var a=document.createElement("div"),n=document.createElement("div");a.innerHTML=e.join("");n.innerHTML=i.join("");for(var r=0,h=s.length;r<h;r++){if(this._hasFrozenRows&&s[r]>=this._actualFrozenRow){if(this.hasFrozenColumns()){this._rowsCache[s[r]].rowNode=$().add($(a.firstChild).appendTo(this._canvasBottomL)).add($(n.firstChild).appendTo(this._canvasBottomR))}else{this._rowsCache[s[r]].rowNode=$().add($(a.firstChild).appendTo(this._canvasBottomL))}}else if(this.hasFrozenColumns()){this._rowsCache[s[r]].rowNode=$().add($(a.firstChild).appendTo(this._canvasTopL)).add($(n.firstChild).appendTo(this._canvasTopR))}else{this._rowsCache[s[r]].rowNode=$().add($(a.firstChild).appendTo(this._canvasTopL))}}
if(o){this._activeCellNode=this.getCellNode(this._activeRow,this._activeCell)}}startPostProcessing(){if(!this._options.enableAsyncPostRender){return}clearTimeout(this._hPostRender);if(this._options.asyncPostRenderDelay<0){this.asyncPostProcessRows()}else{this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay)}}startPostProcessingCleanup(){if(!this._options.enableAsyncPostRenderCleanup){return}clearTimeout(this._hPostRenderCleanup);if(this._options.asyncPostCleanupDelay<0){this.asyncPostProcessCleanupRows()}else{this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay)}}invalidatePostProcessingResults(t){if(this._options.enableAsyncPostRenderCleanup){for(var e in this._postProcessedRows[t]){if(this._postProcessedRows[t].hasOwnProperty(e)){this._postProcessedRows[t][e]="C"}}}else{delete this._postProcessedRows[t]}this._postProcessFromRow=Math.min(this._postProcessFromRow,t)
;this._postProcessToRow=Math.max(this._postProcessToRow,t);this.startPostProcessing()}updateRowPositions(){for(var t in this._rowsCache){this._rowsCache[t].rowNode.css("top",this.getRowTop(parseInt(t,10))+"px")}}updateFooterTotals(){if(!this._options.showFooterRow||!this._initialized)return;var t=null;if(this._data.getGrandTotals){t=this._data.getGrandTotals()}var e=this._cols;for(var i=0;i<e.length;i++){var s=e[i];var o;if(s.field&&t){o=s.groupTotalsFormatter&&s.groupTotalsFormatter(t,s,this)||this.groupTotalsFormatter&&this.groupTotalsFormatter(t,s)||""}$(this.getFooterRowColumn(s.id)).html(o)}}render(){if(!this._initialized){return}var t=this.getVisibleRange();var e=this.getRenderedRange();this.cleanupRows(e);if(this._scrolLLeftRendered!=this._scrollLeft){if(this._hasFrozenRows){var i=jQuery.extend(true,{},e);if(this._options.frozenBottom){i.top=this._actualFrozenRow;i.bottom=this.getDataLength()}else{i.top=0;i.bottom=this._options.frozenRow}this.cleanUpAndRenderCells(i)}
this.cleanUpAndRenderCells(e)}this.renderRows(e);if(this._hasFrozenRows){if(this._options.frozenBottom){this.renderRows({top:this._actualFrozenRow,bottom:this.getDataLength()-1,leftPx:e.leftPx,rightPx:e.rightPx})}else{this.renderRows({top:0,bottom:this._options.frozenRow-1,leftPx:e.leftPx,rightPx:e.rightPx})}}this._postProcessFromRow=t.top;this._postProcessToRow=Math.min(this.getDataLengthIncludingAddNew()-1,t.bottom);this.startPostProcessing();this._scrollTopRendered=this._scrollTop;this._scrolLLeftRendered=this._scrollLeft;this._hRender=null}handleMouseWheel(t,e,i,s){i=(typeof i=="undefined"?t.originalEvent.deltaX:i)||0;s=(typeof s=="undefined"?t.originalEvent.deltaY:s)||0;this._scrollTop=Math.max(0,this._scrollContainerY.scrollTop-s*this._options.rowHeight);this._scrollLeft=this._scrollContainerX.scrollLeft+i*10;var o=this._handleScroll(true);if(o)t.preventDefault()}handleScroll(){this._scrollTop=this._scrollContainerY.scrollTop;this._scrollLeft=this._scrollContainerX.scrollLeft
;return this._handleScroll(false)}_handleScroll(t){var e=this._scrollContainerY.scrollHeight-this._scrollContainerY.clientHeight;var i=this._scrollContainerY.scrollWidth-this._scrollContainerY.clientWidth;e=Math.max(0,e);i=Math.max(0,i);if(this._scrollTop>e){this._scrollTop=e}if(this._scrollLeft>i){this._scrollLeft=i}var s=Math.abs(this._scrollTop-this._scrollTopPrev);var o=Math.abs(this._scrollLeft-this._scrollLeftPrev);if(o||s)this._ignoreScrollUntil=(new Date).getTime()+100;if(o){this._scrollLeftPrev=this._scrollLeft;this._scrollContainerX.scrollLeft=this._scrollLeft;if(this.hasFrozenColumns()){this._headerColsR.parentElement.scrollLeft=this._scrollLeft;this._topPanelR.parentElement.scrollLeft=this._scrollLeft;this._headerRowColsR.parentElement.scrollLeft=this._scrollLeft;this._footerRowR.parentElement.scrollLeft=this._scrollLeft;if(this._hasFrozenRows){this._viewportTopR.scrollLeft=this._scrollLeft}}else{this._headerColsL.parentElement.scrollLeft=this._scrollLeft
;this._topPanelL.parentElement.scrollLeft=this._scrollLeft;this._headerRowColsL.parentElement.scrollLeft=this._scrollLeft;this._footerRowColsL.parentElement.scrollLeft=this._scrollLeft;if(this._hasFrozenRows){this._viewportTopL.scrollLeft=this._scrollLeft}}}if(s){this._vScrollDir=this._scrollTopPrev<this._scrollTop?1:-1;this._scrollTopPrev=this._scrollTop;if(t){this._scrollContainerY.scrollTop=this._scrollTop}if(this.hasFrozenColumns()){if(this._hasFrozenRows&&!this._options.frozenBottom){this._viewportBottomL.scrollTop=this._scrollTop}else{this._viewportTopL.scrollTop=this._scrollTop}}if(s<this._viewportH){this.scrollTo(this._scrollTop+this._pageOffset)}else{var l=this._pageOffset;if(this._realScrollHeight==this._viewportH){this._page=0}else{this._page=Math.min(this._numberOfPages-1,Math.floor(this._scrollTop*((this._virtualHeight-this._viewportH)/(this._realScrollHeight-this._viewportH))*(1/this._pageHeight)))}this._pageOffset=Math.round(this._page*this._jumpinessCoefficient)
;if(l!=this._pageOffset){this.invalidateAllRows()}}}if(o||s){if(this._hRender){clearTimeout(this._hRender)}if(Math.abs(this._scrollTopRendered-this._scrollTop)>20||Math.abs(this._scrolLLeftRendered-this._scrollLeft)>20){if(this._options.forceSyncScrolling||Math.abs(this._scrollTopRendered-this._scrollTop)<this._viewportH&&Math.abs(this._scrolLLeftRendered-this._scrollLeft)<this._viewportW){this.render()}else{this._hRender=setTimeout(this.render.bind(this),50)}this.trigger(this.onViewportChanged)}}this.trigger(this.onScroll,{scrollLeft:this._scrollLeft,scrollTop:this._scrollTop});return!!(o||s)}asyncPostProcessRows(){var t=this.getDataLength();var e=this._cols;while(this._postProcessFromRow<=this._postProcessToRow){var i=this._vScrollDir>=0?this._postProcessFromRow++:this._postProcessToRow--;var s=this._rowsCache[i];if(!s||i>=t){continue}if(!this._postProcessedRows[i]){this._postProcessedRows[i]={}}this.ensureCellNodesInRowsCache(i);for(var o in s.cellNodesByColumnIdx){
if(!s.cellNodesByColumnIdx.hasOwnProperty(o)){continue}var l=parseInt(o,10);var r=e[l];var h=this._postProcessedRows[i][l];if(h!=="R"){if(r.asyncPostRender||r.asyncPostRenderCleanup){var a=s.cellNodesByColumnIdx[l];if(a){r.asyncPostRender&&r.asyncPostRender(a,i,this.getDataItem(i),r,h==="C")}}this._postProcessedRows[i][l]="R"}}if(this._options.asyncPostRenderDelay>=0){this._hPostRender=setTimeout(this.asyncPostProcessRows.bind(this),this._options.asyncPostRenderDelay);return}}}asyncPostProcessCleanupRows(){var t=this._cols;while(this._postProcessCleanupQueue.length>0){var e=this._postProcessCleanupQueue[0].groupId;while(this._postProcessCleanupQueue.length>0&&this._postProcessCleanupQueue[0].groupId==e){var i=this._postProcessCleanupQueue.shift();if(i.rowNode!=null){$(i.rowNode).remove()}if(i.cellNode!=null){var s=t[i.columnIdx];if(s&&s.asyncPostRenderCleanup){s.asyncPostRenderCleanup(i.cellNode,i.rowIdx,s);i.cellNode.remove()}}}if(this._options.asyncPostRenderDelay>=0){
this._hPostRenderCleanup=setTimeout(this.asyncPostProcessCleanupRows.bind(this),this._options.asyncPostCleanupDelay);return}}}updateCellCssStylesOnRenderedRows(t,e){var i,s,o,l;for(var r in this._rowsCache){l=e&&e[r];o=t&&t[r];if(l){for(s in l){if(!o||l[s]!=o[s]){i=this.getCellNode(parseInt(r,10),this.getColumnIndex(s));if(i){$(i).removeClass(l[s])}}}}if(o){for(s in o){if(!l||l[s]!=o[s]){i=this.getCellNode(parseInt(r,10),this.getColumnIndex(s));if(i){$(i).addClass(o[s])}}}}}}addCellCssStyles(t,e){if(this._cellCssClasses[t]){throw"addCellCssStyles: cell CSS hash with key '"+t+"' already exists."}this._cellCssClasses[t]=e;this.updateCellCssStylesOnRenderedRows(e,null);this.trigger(this.onCellCssStylesChanged,{key:t,hash:e})}removeCellCssStyles(t){if(!this._cellCssClasses[t]){return}this.updateCellCssStylesOnRenderedRows(null,this._cellCssClasses[t]);delete this._cellCssClasses[t];this.trigger(this.onCellCssStylesChanged,{key:t,hash:null})}setCellCssStyles(t,e){
var i=this._cellCssClasses[t];this._cellCssClasses[t]=e;this.updateCellCssStylesOnRenderedRows(e,i);this.trigger(this.onCellCssStylesChanged,{key:t,hash:e})}getCellCssStyles(t){return this._cellCssClasses[t]}flashCell(t,e,i){i=i||100;if(this._rowsCache[t]){var s=$(this.getCellNode(t,e));l(4)}var o=this._options.cellFlashingCssClass;function l(t){if(!t){return}setTimeout((function(){s.queue((function(){s.toggleClass(o).dequeue();l(t-1)}))}),i)}}handleDragInit(t,e){var i=this.getCellFromEvent(t);if(!i||!this.cellExists(i.row,i.cell)){return false}var s=this.trigger(this.onDragInit,e,t);if(t.isImmediatePropagationStopped()){return s}return false}handleDragStart(t,e){var i=this.getCellFromEvent(t);if(!i||!this.cellExists(i.row,i.cell)){return false}var s=this.trigger(this.onDragStart,e,t);if(t.isImmediatePropagationStopped()){return s}return false}handleDrag(t,e){return this.trigger(this.onDrag,e,t)}handleDragEnd(t,e){this.trigger(this.onDragEnd,e,t)}handleKeyDown(t){
this.trigger(this.onKeyDown,{row:this._activeRow,cell:this._activeCell},t);var e=t.isImmediatePropagationStopped();if(!e){if(!t.shiftKey&&!t.altKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList){if(this._currentEditor.keyCaptureList.indexOf(t.which)>=0){return}}if(t.which==p.HOME){if(t.ctrlKey){this.navigateTop();e=true}else e=this.navigateRowStart()}else if(t.which==p.END){if(t.ctrlKey){this.navigateBottom();e=true}else e=this.navigateRowEnd()}}}if(!e){if(!t.shiftKey&&!t.altKey&&!t.ctrlKey){if(this._options.editable&&this._currentEditor&&this._currentEditor.keyCaptureList){if(this._currentEditor.keyCaptureList.indexOf(t.which)>=0){return}}if(t.which==p.ESCAPE){if(!this.getEditorLock().isActive()){return}this.cancelEditAndSetFocus()}else if(t.which==p.PAGEDOWN){this.navigatePageDown();e=true}else if(t.which==p.PAGEUP){this.navigatePageUp();e=true}else if(t.which==p.LEFT){e=this.navigateLeft()}else if(t.which==p.RIGHT){e=this.navigateRight()
}else if(t.which==p.UP){e=this.navigateUp()}else if(t.which==p.DOWN){e=this.navigateDown()}else if(t.which==p.TAB){if(this._options.enableTabKeyNavigation)e=this.navigateNext()}else if(t.which==p.ENTER){if(this._options.editable){if(this._currentEditor){if(this._activeRow===this.getDataLength()){this.navigateDown()}else{this.commitEditAndSetFocus()}}else{if(this.getEditorLock().commitCurrentEdit()){this.makeActiveCellEditable()}}}e=true}}else if(t.which==p.TAB&&t.shiftKey&&!t.ctrlKey&&!t.altKey){e=this.navigatePrev()}}if(e){t.stopPropagation();t.preventDefault();try{t.originalEvent.keyCode=0}catch(t){}}}handleClick(t){if(!this._currentEditor){if(t.target!=document.activeElement||$(t.target).hasClass("slick-cell")){this.setFocus()}}var e=this.getCellFromEvent(t);if(!e||this._currentEditor!=null&&this._activeRow==e.row&&this._activeCell==e.cell){return}this.trigger(this.onClick,{row:e.row,cell:e.cell},t);if(t.isImmediatePropagationStopped()){return}if(this.canCellBeActive(e.row,e.cell)){
if(!this.getEditorLock().isActive()||this.getEditorLock().commitCurrentEdit()){var i=t.target&&t.target.classList.contains(n);var s=this._cols[e.cell];var o=!!(this._options.editable&&s&&s.editor&&this._options.suppressActiveCellChangeOnEdit);this.setActiveCellInternal(this.getCellNode(e.row,e.cell),null,i,o,t)}}}handleContextMenu(t){var e=$(t.target).closest(".slick-cell",this._container);if(e.length===0){return}if(this._activeCellNode===e[0]&&this._currentEditor!=null){return}this.trigger(this.onContextMenu,{},t)}handleDblClick(t){var e=this.getCellFromEvent(t);if(!e||this._currentEditor!=null&&this._activeRow==e.row&&this._activeCell==e.cell){return}this.trigger(this.onDblClick,{row:e.row,cell:e.cell},t);if(t.isImmediatePropagationStopped()){return}if(this._options.editable){this.gotoCell(e.row,e.cell,true)}}handleHeaderMouseEnter(t){this.trigger(this.onHeaderMouseEnter,{column:$(t.target).data("column")},t)}handleHeaderMouseLeave(t){this.trigger(this.onHeaderMouseLeave,{
column:$(t.target).data("column")},t)}handleHeaderContextMenu(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns");var i=e&&e.data("column");this.trigger(this.onHeaderContextMenu,{column:i},t)}handleHeaderClick(t){var e=$(t.target).closest(".slick-header-column",".slick-header-columns");var i=e&&e.data("column");if(i){this.trigger(this.onHeaderClick,{column:i},t)}}handleMouseEnter(t){this.trigger(this.onMouseEnter,{},t)}handleMouseLeave(t){this.trigger(this.onMouseLeave,{},t)}cellExists(t,e){return!(t<0||t>=this.getDataLength()||e<0||e>=this._cols.length)}getCellFromPoint(t,e){var i=this.getRowFromPosition(e);var s=0;var o=this._cols;var l=0;for(var r=0;r<o.length&&l<t;r++){l+=o[r].width;s++}if(s<0){s=0}return{row:i,cell:s-1}}getCellFromNode(t){var e=/l(\d+)/.exec(t.className);if(!e){throw"getCellFromNode: cannot get cell - "+t.className}return parseInt(e[1],10)}getRowFromNode(t){
for(var e in this._rowsCache)for(var i in this._rowsCache[e].rowNode)if(this._rowsCache[e].rowNode[i]===t)return parseInt(e,10);return null}getFrozenRowOffset(t){var e=this._hasFrozenRows?this._options.frozenBottom?t>=this._actualFrozenRow?this._realScrollHeight<this._viewportTopH?this._actualFrozenRow*this._options.rowHeight:this._realScrollHeight:0:t>=this._actualFrozenRow?this._frozenRowsHeight:0:0;return e}getCellFromEvent(t){var e,i;var s=$(t.target).closest(".slick-cell",this._container);if(!s.length){return null}e=this.getRowFromNode(s[0].parentNode);if(this._hasFrozenRows){var o=s.parents(".grid-canvas").offset();var l=0;var r=s.parents(".grid-canvas-bottom").length;if(r){l=this._options.frozenBottom?Math.round($(this._canvasTopL).height()):this._frozenRowsHeight}e=this.getCellFromPoint(t.clientX-o[this._rtlS],t.clientY-o.top+l+$(document).scrollTop()).row}i=this.getCellFromNode(s[0]);if(e==null||i==null){return null}else{return{row:e,cell:i}}}getCellNodeBox(t,e){
if(!this.cellExists(t,e)){return null}var i=this.getFrozenRowOffset(t);var s=this._cols,o=this._frozenCols;var l=this.getRowTop(t)-i;var r=l+this._options.rowHeight-1;var h=0;for(var a=0;a<e;a++){h+=s[a].width;if(a==o-1){h=0}}var n=h+s[e].width;return this._rtl?{top:l,right:h,bottom:r,left:n}:{top:l,left:h,bottom:r,right:n}}resetActiveCell(){this.setActiveCellInternal(null,false)}focus(){this.setFocus()}setFocus(){if(this._tabbingDirection==-1){this._focusSink1.focus()}else{this._focusSink2.focus()}}scrollCellIntoView(t,e,i){this.scrollRowIntoView(t,i);if(e<this._frozenCols)return;var s=this.getColspan(t,e);this.internalScrollColumnIntoView(this._colLeft[e],this._colRight[e+(s>1?s-1:0)])}scrollColumnIntoView(t){this.internalScrollColumnIntoView(this._colLeft[t],this._colRight[t])}internalScrollColumnIntoView(t,e){var i=this._scrollLeft+$(this._scrollContainerX).width()-(this._viewportHasVScroll?this._scrollDims.width:0);var s
;if(t<this._scrollLeft)s=t;else if(e>i)s=Math.min(t,e-this._scrollContainerX.clientWidth);else return;this._scrollContainerX.scrollLeft=s;this.handleScroll();this.render()}setActiveCellInternal(t,e,i,s,o){if(this._activeCellNode!=null){this.makeActiveCellNormal();$(this._activeCellNode).removeClass("active");if(this._rowsCache[this._activeRow]){$(this._rowsCache[this._activeRow].rowNode).removeClass("active")}}var l=this._activeCellNode!==t;this._activeCellNode=t;if(this._activeCellNode!=null){var r=$(this._activeCellNode);var h=r.offset();var a=Math.floor(r.parents(".grid-canvas").offset().top);var n=r.parents(".grid-canvas-bottom").length;if(this._hasFrozenRows&&n){a-=this._options.frozenBottom?Math.round($(this._canvasTopL).height()):this._frozenRowsHeight}var d=this.getCellFromPoint(h[this._rtlS],Math.ceil(h.top)-a);this._activeRow=d.row;this._activeCell=this._activePosX=this.getCellFromNode(this._activeCellNode);if(this._options.showCellSelection){r.addClass("active")
;if(this._rowsCache[this._activeRow]){$(this._rowsCache[this._activeRow].rowNode).addClass("active")}}if(e==null){e=this._activeRow==this.getDataLength()||this._options.autoEdit}if(this._options.editable&&e&&this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){clearTimeout(this._hEditorLoader);if(this._options.asyncEditorLoading){this._hEditorLoader=setTimeout((()=>{this.makeActiveCellEditable(void 0,i,o)}),this._options.asyncEditorLoadDelay)}else{this.makeActiveCellEditable(void 0,i,o)}}}else{this._activeRow=this._activeCell=null}if(!s){this.trigger(this.onActiveCellChanged,this.getActiveCell())}}clearTextSelection(){if(document.selection&&document.selection.empty){try{document.selection.empty()}catch(t){}}else if(window.getSelection){var t=window.getSelection();if(t&&t.removeAllRanges){t.removeAllRanges()}}}isCellPotentiallyEditable(t,e){var i=this.getDataLength();if(t<i&&!this.getDataItem(t)){return false}if(this._cols[e].cannotTriggerInsert&&t>=i){return false}
if(!this.getEditor(t,e)){return false}return true}makeActiveCellNormal(){if(!this._currentEditor){return}this.trigger(this.onBeforeCellEditorDestroy,{editor:this._currentEditor});this._currentEditor.destroy();this._currentEditor=null;if(this._activeCellNode){var t=this.getDataItem(this._activeRow);$(this._activeCellNode).removeClass("editable invalid");if(t){var e=this._cols[this._activeCell];var i=t?this.getFormatter(this._activeRow,e)(this._activeRow,this._activeCell,this.getDataItemValueForColumn(t,e),e,t):"";this.applyFormatResultToCellNode(i,this._activeCellNode);this.invalidatePostProcessingResults(this._activeRow)}}if(navigator.userAgent.toLowerCase().match(/msie/)){this.clearTextSelection()}this.getEditorLock().deactivate(this._editController)}editActiveCell(t){this.makeActiveCellEditable(t)}makeActiveCellEditable(t,e,i){if(!this._activeCellNode){return}if(!this._options.editable){throw"Grid : makeActiveCellEditable : should never get called when options.editable is false"}
clearTimeout(this._hEditorLoader);if(!this.isCellPotentiallyEditable(this._activeRow,this._activeCell)){return}var s=this._cols[this._activeCell];var o=this.getDataItem(this._activeRow);if(this.trigger(this.onBeforeEditCell,{row:this._activeRow,cell:this._activeCell,item:o,column:s})===false){this.setFocus();return}this.getEditorLock().activate(this._editController);$(this._activeCellNode).addClass("editable");var l=t||this.getEditor(this._activeRow,this._activeCell);if(!t&&!l.suppressClearOnEdit){this._activeCellNode.innerHTML=""}var r=this._data.getItemMetadata&&this._data.getItemMetadata(this._activeRow);r=r&&r.columns;var h=r&&(r[s.id]||r[this._activeCell]);this._currentEditor=new l({grid:this,gridPosition:this.absBox(this._container),position:this.absBox(this._activeCellNode),container:this._activeCellNode,column:s,item:o||{},event:i,commitChanges:this.commitEditAndSetFocus,cancelChanges:this.cancelEditAndSetFocus});if(o){this._currentEditor.loadValue(o)
;if(e&&this._currentEditor.preClick){this._currentEditor.preClick()}}this._serializedEditorValue=this._currentEditor.serializeValue();if(this._currentEditor.position){this.handleActiveCellPositionChange()}}commitEditAndSetFocus(){if(this.getEditorLock().commitCurrentEdit()){this.setFocus();if(this._options.autoEdit){this.navigateDown()}}}cancelEditAndSetFocus(){if(this.getEditorLock().cancelCurrentEdit()){this.setFocus()}}absBox(t){var e={top:t.offsetTop,bottom:0,width:$(t).outerWidth(),height:$(t).outerHeight(),visible:true};e[this._rtlS]=t.offsetLeft;e[this._rtlE]=0;e.bottom=e.top+e.height;e[this._rtlE]=e[this._rtlS]+e.width;var i=t.offsetParent;while((t=t.parentNode)!=document.body){if(e.visible&&t.scrollHeight!=t.offsetHeight&&$(t).css("overflowY")!="visible"){e.visible=e.bottom>t.scrollTop&&e.top<t.scrollTop+t.clientHeight}if(e.visible&&t.scrollWidth!=t.offsetWidth&&$(t).css("overflowX")!="visible"){e.visible=e[this._rtlE]>t.scrollLeft&&e[this._rtlS]<t.scrollLeft+t.clientWidth}
e[this._rtlS]-=t.scrollLeft;e.top-=t.scrollTop;if(t===i){e.right+=t.offsetLeft;e.top+=t.offsetTop;i=t.offsetParent}e.bottom=e.top+e.height;e[this._rtlE]=e[this._rtlS]+e.width}return e}getActiveCellPosition(){return this.absBox(this._activeCellNode)}getGridPosition(){return this.absBox(this._container)}getCellEditor(){return this._currentEditor}getActiveCell(){if(!this._activeCellNode){return null}else{return{row:this._activeRow,cell:this._activeCell}}}getActiveCellNode(){return this._activeCellNode}scrollActiveCellIntoView(){if(this._activeRow!=null&&this._activeCell!=null){this.scrollCellIntoView(this._activeRow,this._activeCell)}}scrollRowIntoView(t,e){if(!this._hasFrozenRows||!this._options.frozenBottom&&t>this._actualFrozenRow-1||this._options.frozenBottom&&t<this._actualFrozenRow-1){var i=Math.round($(this._scrollContainerY).height());var s=this._hasFrozenRows&&!this._options.frozenBottom?t-this._options.frozenRow:t;var o=s*this._options.rowHeight
;var l=(s+1)*this._options.rowHeight-i+(this._viewportHasHScroll?this._scrollDims.height:0);if((s+1)*this._options.rowHeight>this._scrollTop+i+this._pageOffset){this.scrollTo(e?o:l);this.render()}else if(s*this._options.rowHeight<this._scrollTop+this._pageOffset){this.scrollTo(e?l:o);this.render()}}}scrollRowToTop(t){this.scrollTo(t*this._options.rowHeight);this.render()}scrollPage(t){var e=t*this._numVisibleRows;this.scrollTo((this.getRowFromPosition(this._scrollTop)+e)*this._options.rowHeight);this.render();if(this._options.enableCellNavigation&&this._activeRow!=null){var i=this._activeRow+e;var s=this.getDataLengthIncludingAddNew();if(i>=s){i=s-1}if(i<0){i=0}var o=0,l=null;var r=this._activePosX;while(o<=this._activePosX){if(this.canCellBeActive(i,o)){l=o}o+=this.getColspan(i,o)}if(l!=null){this.setActiveCellInternal(this.getCellNode(i,l));this._activePosX=r}else{this.resetActiveCell()}}}navigatePageDown(){this.scrollPage(1)}navigatePageUp(){this.scrollPage(-1)}navigateTop(){
this.navigateToRow(0)}navigateBottom(){this.navigateToRow(this.getDataLength()-1)}navigateToRow(t){var e=this.getDataLength();if(!e){return true}if(t<0)t=0;else if(t>=e)t=e-1;this.scrollCellIntoView(t,0,true);if(this._options.enableCellNavigation&&this._activeRow!=null){var i=0,s=null;var o=this._activePosX;while(i<=this._activePosX){if(this.canCellBeActive(t,i))s=i;i+=this.getColspan(t,i)}if(s!=null){this.setActiveCellInternal(this.getCellNode(t,s));this._activePosX=o}else this.resetActiveCell()}return true}getColspan(t,e){var i=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(!i||!i.columns){return 1}var s=this._cols;var o=s[e]&&(i.columns[s[e].id]||i.columns[e]);var l=o&&o.colspan;if(l==="*"){l=s.length-e}else{l=l||1}return l}findFirstFocusableCell(t){var e=0;var i=this._cols;while(e<i.length){if(this.canCellBeActive(t,e)){return e}e+=this.getColspan(t,e)}return null}findLastFocusableCell(t){var e=0;var i=null;var s=this._cols;while(e<s.length){
if(this.canCellBeActive(t,e)){i=e}e+=this.getColspan(t,e)}return i}gotoRight(t,e,i){var s=this._cols;if(e>=s.length){return null}do{e+=this.getColspan(t,e)}while(e<s.length&&!this.canCellBeActive(t,e));if(e<s.length){return{row:t,cell:e,posX:e}}return null}gotoLeft(t,e,i){if(e<=0){return null}var s=this.findFirstFocusableCell(t);if(s===null||s>=e){return null}var o={row:t,cell:s,posX:s};var l;while(true){l=this.gotoRight(o.row,o.cell,o.posX);if(!l){return null}if(l.cell>=e){return o}o=l}}gotoDown(t,e,i){var s;var o=this.getDataLengthIncludingAddNew();while(true){if(++t>=o){return null}s=e=0;while(e<=i){s=e;e+=this.getColspan(t,e)}if(this.canCellBeActive(t,s)){return{row:t,cell:s,posX:i}}}}gotoUp(t,e,i){var s;while(true){if(--t<0){return null}s=e=0;while(e<=i){s=e;e+=this.getColspan(t,e)}if(this.canCellBeActive(t,s)){return{row:t,cell:s,posX:i}}}}gotoNext(t,e,i){if(t==null&&e==null){t=e=i=0;if(this.canCellBeActive(t,e)){return{row:t,cell:e,posX:e}}}var s=this.gotoRight(t,e,i);if(s){
return s}var o=null;var l=this.getDataLengthIncludingAddNew();while(++t<l){o=this.findFirstFocusableCell(t);if(o!=null){return{row:t,cell:o,posX:o}}}return null}gotoPrev(t,e,i){var s=this._cols;if(t==null&&e==null){t=this.getDataLengthIncludingAddNew()-1;e=i=s.length-1;if(this.canCellBeActive(t,e)){return{row:t,cell:e,posX:e}}}var o;var l;while(!o){o=this.gotoLeft(t,e,i);if(o){break}if(--t<0){return null}e=0;l=this.findLastFocusableCell(t);if(l!=null){o={row:t,cell:l,posX:l}}}return o}gotoRowStart(t){var e=this.findFirstFocusableCell(t);if(e===null)return null;return{row:t,cell:e,posX:e}}gotoRowEnd(t){var e=this.findLastFocusableCell(t);if(e===null)return null;return{row:t,cell:e,posX:e}}navigateRight(){return this.navigate("right")}navigateLeft(){return this.navigate("left")}navigateDown(){return this.navigate("down")}navigateUp(){return this.navigate("up")}navigateNext(){return this.navigate("next")}navigatePrev(){return this.navigate("prev")}navigateRowStart(){
return this.navigate("home")}navigateRowEnd(){return this.navigate("end")}navigate(t){if(!this._options.enableCellNavigation){return false}if(!this._activeCellNode&&t!="prev"&&t!="next"){return false}if(!this.getEditorLock().commitCurrentEdit()){return true}this.setFocus();var e={up:-1,down:1,prev:-1,next:1,home:-1,end:1};e[this._rtlS]=-1;e[this._rtlE]=1;this._tabbingDirection=e[t];var i={up:this.gotoUp,down:this.gotoDown,prev:this.gotoPrev,next:this.gotoNext,home:this.gotoRowStart,end:this.gotoRowEnd};i[this._rtlS]=this.gotoLeft;i[this._rtlE]=this.gotoRight;var s=i[t].bind(this);var o=s(this._activeRow,this._activeCell,this._activePosX);if(o){if(this._hasFrozenRows&&this._options.frozenBottom&&o.row==this.getDataLength()){return}var l=o.row==this.getDataLength();if(!this._options.frozenBottom&&o.row>=this._actualFrozenRow||this._options.frozenBottom&&o.row<this._actualFrozenRow){this.scrollCellIntoView(o.row,o.cell,!l)}this.setActiveCellInternal(this.getCellNode(o.row,o.cell))
;this._activePosX=o.posX;return true}else{this.setActiveCellInternal(this.getCellNode(this._activeRow,this._activeCell));return false}}getCellNode(t,e){if(this._rowsCache[t]){this.ensureCellNodesInRowsCache(t);return this._rowsCache[t].cellNodesByColumnIdx[e]}return null}setActiveCell(t,e){if(!this._initialized){return}var i=this._cols;if(t>this.getDataLength()||t<0||e>=i.length||e<0){return}if(!this._options.enableCellNavigation){return}this.scrollCellIntoView(t,e,false);this.setActiveCellInternal(this.getCellNode(t,e),false)}canCellBeActive(t,e){var i=this._cols;if(!this._options.enableCellNavigation||t>=this.getDataLengthIncludingAddNew()||t<0||e>=i.length||e<0){return false}var s=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(s&&typeof s.focusable==="boolean"){return s.focusable}var o=s&&s.columns;if(o&&i[e]&&o[i[e].id]&&typeof o[i[e].id].focusable==="boolean"){return o[i[e].id].focusable}if(o&&o[e]&&typeof o[e].focusable==="boolean"){return o[e].focusable}
return i[e].focusable}canCellBeSelected(t,e){var i=this._cols;if(t>=this.getDataLength()||t<0||e>=i.length||e<0){return false}var s=this._data.getItemMetadata&&this._data.getItemMetadata(t);if(s&&typeof s.selectable==="boolean"){return s.selectable}var o=s&&s.columns&&(s.columns[i[e].id]||s.columns[e]);if(o&&typeof o.selectable==="boolean"){return o.selectable}return i[e].selectable}gotoCell(t,e,i){if(!this._initialized){return}if(!this.canCellBeActive(t,e)){return}if(!this.getEditorLock().commitCurrentEdit()){return}this.scrollCellIntoView(t,e,false);var s=this.getCellNode(t,e);this.setActiveCellInternal(s,i||t===this.getDataLength()||this._options.autoEdit);if(!this._currentEditor){this.setFocus()}}commitCurrentEdit(){var t=this.getDataItem(this._activeRow);var e=this._cols[this._activeCell];var i=this;if(this._currentEditor){if(this._currentEditor.isValueChanged()){var s=this._currentEditor.validate();if(s.valid){if(this._activeRow<this.getDataLength()){var o={row:this._activeRow,
cell:i._activeCell,editor:this._currentEditor,serializedValue:this._currentEditor.serializeValue(),prevSerializedValue:this._serializedEditorValue,execute:function(){this.editor.applyValue(t,this.serializedValue);i.updateRow(this.row);i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:t})},undo:function(){this.editor.applyValue(t,this.prevSerializedValue);i.updateRow(this.row);i.trigger(i.onCellChange,{row:this.activeRow,cell:i._activeCell,item:t})}};if(this._options.editCommandHandler){this.makeActiveCellNormal();this._options.editCommandHandler(t,e,o)}else{o.execute();this.makeActiveCellNormal()}}else{var l={};this._currentEditor.applyValue(l,this._currentEditor.serializeValue());this.makeActiveCellNormal();this.trigger(this.onAddNewRow,{item:l,column:e})}return!this.getEditorLock().isActive()}else{$(this._activeCellNode).removeClass("invalid");$(this._activeCellNode).width();$(this._activeCellNode).addClass("invalid");this.trigger(this.onValidationError,{
editor:this._currentEditor,cellNode:this._activeCellNode,validationResults:s,row:this._activeRow,cell:this._activeCell,column:e});this._currentEditor.focus();return false}}this.makeActiveCellNormal()}return true}cancelCurrentEdit(){this.makeActiveCellNormal();return true}rowsToRanges(t){var e=[];var i=this._cols.length-1;for(var s=0;s<t.length;s++){e.push(new x(t[s],0,t[s],i))}return e}getSelectedRows(){if(!this._selectionModel){throw"Selection model is not set"}return this._selectedRows}setSelectedRows(t){if(!this._selectionModel){throw"Selection model is not set"}this._selectionModel.setSelectedRanges(this.rowsToRanges(t))}};return r(h)})();
/**
 * @license
 * (c) 2017-2022 Serenity.is, Volkan Ceylan, Furkan Evran, Victor Tomaili, and other Serenity contributors
 * https://github.com/serenity-is/serenity
 * Ported to TypeScript and heavily refactored while keeping compatibility with original SlickGrid where possible
 * 
 * (c) 2009-2016 Michael Leibman 
 * michael{dot}leibman{at}gmail{dot}com
 * http://github.com/mleibman/slickgrid
 *
 * (c) 2009-2019 Ben McIntyre
 * http://github.com/6pac/slickgrid
 * 
 * Distributed under MIT license.
 * All rights reserved.
 *
 * Based on SlickGrid v2.4 and 6pack/slickgrid fixes
 *
 * NOTES:
 *     Cell/row DOM manipulations are done directly bypassing jQuery's DOM manipulation methods.
 *     This increases the speed dramatically, but can only be done safely because there are no event handlers
 *     or data associated with any cell/row DOM nodes.  Cell editors must make sure they implement .destroy()
 *     and do proper cleanup.
 */(function(){for(var t in Slick._)Slick[t]=Slick._[t];delete Slick._})();