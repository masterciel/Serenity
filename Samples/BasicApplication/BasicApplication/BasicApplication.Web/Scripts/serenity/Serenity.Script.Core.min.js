(function(){"use strict";var e={};global.Serenity=global.Serenity||{};ss.initAssembly(e,"Serenity.Script.Core");var t=function(){};t.__typeName="Q";t.$blockUIWithCheck=function(e){if(t.$blockUICount>0){t.$blockUICount++;return}$.blockUI(e);t.$blockUICount++};t.blockUI=function(e){e=$.extend({baseZ:2e3,message:"",overlayCSS:{opacity:"0.0",zIndex:2e3,cursor:"wait"},fadeOut:0},e);if(e.useTimeout){window.setTimeout(function(){t.$blockUIWithCheck(e)},0)}else{t.$blockUIWithCheck(e)}};t.blockUndo=function(){if(t.$blockUICount>1){t.$blockUICount--;return}t.$blockUICount--;$.unblockUI({fadeOut:0})};t.formatDate=function(e,t){if(ss.staticEquals(e,null)){return""}if(ss.isNullOrUndefined(t)){t=s.dateFormat}var n=function(e){return ss.padLeftString(e.toString(),2,48)};return t.replace(new RegExp("dd?d?d?|MM?M?M?|yy?y?y?|hh?|HH?|mm?|ss?|tt?|fff|zz?z?|\\/","g"),function(t){switch(t){case"/":{return s.dateSeparator}case"hh":{return n(e.getHours()<13?e.getHours():e.getHours()-12)}case"h":{return e.getHours()<13?e.getHours():e.getHours()-12}case"HH":{return n(e.getHours())}case"H":{return e.getHours()}case"mm":{return n(e.getMinutes())}case"m":{return e.getMinutes()}case"ss":{return n(e.getSeconds())}case"s":{return e.getSeconds()}case"yyyy":{return e.getFullYear()}case"yy":{return e.getFullYear().toString().substr(2,4)}case"dddd":{return ss.cast(e.GetDayName(),String)}case"ddd":{return ss.cast(e.GetDayName(true),String)}case"dd":{return n(e.getDate())}case"d":{return e.getDate().toString()}case"MM":{return n(e.getMonth()+1)}case"M":{return e.getMonth()+1}case"t":{return e.getHours()<12?"A":"P"}case"tt":{return e.getHours()<12?"AM":"PM"}case"fff":{return ss.padLeftString(e.getMilliseconds().toString(),3,48)}case"zzz":case"zz":case"z":{return""}default:{return t}}})};t.parseDate=function(e){return Q$Externals.parseDate(e)};t.parseISODateTime=function(e){return Q$Externals.parseISODateTime(e)};t.alert=function(e,t){Q$Externals.alertDialog(e,t)};t.warning=function(e,t){Q$Externals.alertDialog(e,$.extend({title:y.WarningTitle.get(),dialogClass:"s-MessageDialog s-WarningDialog"},t))};t.confirm=function(e,t,n){Q$Externals.confirmDialog(e,t,n)};t.information=function(e,t,n){Q$Externals.confirmDialog(e,t,$.extend({title:y.InformationTitle.get(),yesButton:y.OkButton.get(),noButton:null,dialogClass:"s-MessageDialog s-InformationDialog"},n))};t.htmlEncode=function(e){var n=ss.isNullOrUndefined(e)?"":e.toString();if(new RegExp("[><&]","g").test(n)){return n.replace(new RegExp("[><&]","g"),t.$htmlEncodeReplacer)}return n};t.newBodyDiv=function(){return $("<div/>").appendTo(document.body)};t.$htmlEncodeReplacer=function(e){switch(e){case"&":{return"&amp;"}case">":{return"&gt;"}case"<":{return"&lt;"}}return e};t.clearOptions=function(e){e.html("")};t.addEmptyOption=function(e){t.addOption(e,"","--seÃ§iniz--")};t.addOption=function(e,t,n){$("<option/>").val(t).text(n).appendTo(e)};t.findElementWithRelativeId=function(e,n){var s=e.attr("id");if(t.isEmptyOrNull(s)){return $("#"+n)}var i=$(s+n);if(i.length>0){return i}i=$(s+"_"+n);if(i.length>0){return i}while(true){var r=s.lastIndexOf(String.fromCharCode(95));if(r<=0){return $("#"+n)}s=s.substr(0,r);i=$("#"+s+"_"+n);if(i.length>0){return i}}};t.outerHtml=function(e){return $("<i/>").append(e.eq(0).clone()).html()};t.layoutFillHeightValue=function(e){var t=0;e.parent().children().not(e).each(function(e,n){var s=$(n);if(s.is(":visible")){t+=s.outerHeight(true)}});t=e.parent().height()-t;t=t-(e.outerHeight(true)-e.height());return t};t.layoutFillHeight=function(e){var n=t.layoutFillHeightValue(e);var s=n+"px";if(!ss.referenceEquals(e.css("height"),s)){e.css("height",s)}};t.initFullHeightGridPage=function(e){$("body").addClass("full-height-page");var n=function(){if(e.parent().hasClass("page-content")){e.css("height","1px").css("overflow","hidden")}t.layoutFillHeight(e);e.triggerHandler("layout")};if($("body").hasClass("has-layout-event")){$("body").bind("layout",n)}else if(!!ss.isValue(window.window.Metronic)){window.window.Metronic.addResizeHandler(n)}else{$(window).resize(n)}n(null)};t.addFullHeightResizeHandler=function(e){$("body").addClass("full-height-page");var t=function(){var t;try{t=parseInt(ss.coalesce($(".page-content").css("min-height"),"0"))-parseInt(ss.coalesce($(".page-content").css("padding-top"),"0"))-parseInt(ss.coalesce($(".page-content").css("padding-bottom"),"0"))}catch(n){t=100}e(t)};if(!!ss.isValue(window.window.Metronic)){window.window.Metronic.addResizeHandler(t)}else{$(window).resize(t)}t(null)};t.triggerLayoutOnShow=function(e){_.executeEverytimeWhenShown(e,function(){e.triggerHandler("layout")},true)};t.autoFullHeight=function(e){e.css("height","100%");t.triggerLayoutOnShow(e)};t.notifyWarning=function(e){toastr.warning(e,"",t.$getToastrOptions())};t.notifySuccess=function(e){toastr.success(e,"",t.$getToastrOptions())};t.notifyInfo=function(e){toastr.info(e,"",t.$getToastrOptions())};t.notifyError=function(e){toastr.error(e,"",t.$getToastrOptions())};t.$getToastrOptions=function(){var e=$(window.document.body).children(".ui-dialog").last();var t=$("#toast-container");var n={timeOut:3e3,showDuration:250,hideDuration:500,extendedTimeOut:500};if(e.length>0){if(!t.hasClass("dialog-toast")&&t.length>0){t.remove()}n.target=e;n.positionClass="toast-top-full-width dialog-toast"}else{t.removeClass("dialog-toast");if(t.hasClass("dialog-toast")&&t.length>0){t.remove()}n.positionClass="toast-top-full-width"}return n};t.formatNumber=function(e,t){if(!ss.isValue(e)){return""}return Q$Externals.formatNumber(e,t,s.decimalSeparator,s.get_groupSeperator())};t.parseDecimal=function(e){if(ss.isNullOrUndefined(e)||t.isTrimmedEmpty(e)){return null}return Q$Externals.parseDecimal(e)};t.getRemoteData=function(e){return o.ensure("RemoteData."+e)};t.getRemoteDataAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.ensureAsync("RemoteData."+e);t=1;s.continueWith(i);return}case 1:{t=-1;n.setResult(s.getAwaitedResult());return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};t.getLookup=function(e){return o.ensure("Lookup."+e)};t.getLookupAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.ensureAsync("Lookup."+e);t=1;s.continueWith(i);return}case 1:{t=-1;n.setResult(s.getAwaitedResult());return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};t.reloadLookup=function(e){o.reload("Lookup."+e)};t.reloadLookupAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.reloadAsync("Lookup."+e);t=1;s.continueWith(i);return}case 1:{t=-1;n.setResult(s.getAwaitedResult());return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};t.getForm=function(e){return o.ensure("Form."+e)};t.getFormAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.ensureAsync("Form."+e);t=1;s.continueWith(i);return}case 1:{t=-1;n.setResult(s.getAwaitedResult());return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};t.getTemplate=function(e){return o.ensure("Template."+e)};t.getTemplateAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.ensureAsync("Template."+e);t=1;s.continueWith(i);return}case 1:{t=-1;n.setResult(s.getAwaitedResult());return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};t.canLoadScriptData=function(e){return o.canLoad(e)};t.serviceCall=function(e){var s=function(t){if(!ss.staticEquals(n.notLoggedInHandler,null)&&ss.isValue(t)&&ss.isValue(t.Error)&&t.Error.Code==="NotLoggedIn"&&n.notLoggedInHandler(e,t)){return}if(!ss.staticEquals(e.onError,null)){e.onError(t)}else{i.showServiceError(t.Error)}};e=$.extend({dataType:"json",contentType:"application/json",type:"POST",cache:false,blockUI:true,url:ss.isValue(e.service)&&!ss.startsWithString(e.service,String.fromCharCode(126))&&!ss.startsWithString(e.service,String.fromCharCode(47))?t.resolveUrl("~/services/"+e.service):t.resolveUrl(e.service),data:$.toJSON(e.request),success:function(n,s,i){var r=n;try{if(ss.isNullOrUndefined(r.Error)){if(!ss.staticEquals(e.onSuccess,null)){e.onSuccess(r)}}else{}}finally{if(e.blockUI){t.blockUndo()}if(!ss.staticEquals(e.onCleanup,null)){e.onCleanup()}}},error:function(n,i,r){try{if(n.status===403){var a=null;try{a=n.getResponseHeader("Location")}catch(o){a=null}if(ss.isValue(a)){window.top.location.href=a;return}}if(ss.coalesce(n.getResponseHeader("content-type"),"").toLowerCase().indexOf("application/json")>=0){var l=$.parseJSON(n.responseText);if(ss.isValue(l)&&ss.isValue(l.Error)){s(l);return}}var u=n.responseText;Q$Externals.iframeDialog({html:u})}finally{if(e.blockUI){t.blockUndo()}if(!ss.staticEquals(e.onCleanup,null)){e.onCleanup()}}}},e);if(e.blockUI){t.blockUI(null)}return $.ajax(e)};t.serviceRequest=function(e,n,s,i){t.serviceCall($.extend({service:e,request:n,onSuccess:s},i))};t.trim=function(e){return ss.coalesce(e,"").replace(new RegExp("^\\s+|\\s+$","g"),"")};t.isEmptyOrNull=function(e){return ss.isNullOrUndefined(e)||e.length===0};t.isTrimmedEmpty=function(e){return ss.isNullOrUndefined(t.trimToNull(e))};t.trimToNull=function(e){if(ss.isNullOrUndefined(e)||e.length===0){return null}else{e=e.trim();if(e.length===0){return null}else{return e}}};t.trimToEmpty=function(e){if(ss.isNullOrUndefined(e)||e.length===0){return""}else{return e.trim()}};t.toSingleLine=function(e){return ss.replaceAllString(ss.replaceAllString(t.trimToEmpty(e),"\r\n"," "),"\n"," ").trim()};t.text=function(e){var t=a.$table[e];if(ss.isNullOrUndefined(t)){t=ss.coalesce(e,"")}return t};t.tryGetText=function(e){return a.$table[e]};t.resolveUrl=function(e){if(ss.isValue(e)&&e.length>0&&e.substr(0,2)==="~/"){return n.applicationPath+e.substr(2)}else{return e}};t.autoOpenByQuery=function(e,t){var n=Q$Externals.parseQueryString();var s=n[e];if(ss.isValue(s)){t(s)}};t.autoOpenByQueryID=function(e,n){t.autoOpenByQuery(e,function(e){var t=T.convertToId(e);if(ss.isNullOrUndefined(t)||isNaN(t)){return}n(ss.unbox(t))})};global.Q=t;var n=function(){};n.__typeName="Q$Config";global.Q$Config=n;var s=function(){};s.__typeName="Q$Culture";s.get_groupSeperator=function(){return s.decimalSeparator===","?".":","};global.Q$Culture=s;var i=function(){};i.__typeName="Q$ErrorHandling";i.showServiceError=function(e){if(ss.isNullOrUndefined(e)){throw new ss.Exception("error is null!")}var n;if(ss.isNullOrUndefined(e)){n="??ERROR??"}else{var s=e.Message;if(ss.isNullOrUndefined(s)){s=e.Code}n=s}t.alert(n)};global.Q$ErrorHandling=i;var r=function(e,t){this.$items=null;this.$itemById=null;this.$options=null;this.$items=[];this.$itemById={};this.$options=e||{};if(ss.isValue(t)){this.update(t)}};r.__typeName="Q$Lookup";global.Q$Lookup=r;var a=function(e){this.$key=null;this.$key=e};a.__typeName="Q$LT";a.add=function(e,t){if(!ss.isValue(e)){return}t=ss.coalesce(t,"");var n=ss.getEnumerator(Object.keys(e));try{while(n.moveNext()){var s=n.current();var i=t+s;var r=e[s];if(typeof r==="object"){a.add(r,i+".")}else{a.$table[i]=r}}}finally{n.dispose()}};a.initializeTextClass=function(e,t){var n=e;var s=ss.arrayClone(Object.keys(e));for(var i=0;i<s.length;i++){var r=s[i];var o=n[r];if(ss.isInstanceOfType(o,a)){var l=o;var u=t+r;a.$table[u]=l.$key;n[r]=new a(u)}}};a.getDefault=function(e,t){var n=a.$table[e];if(ss.isNullOrUndefined(n)){var s=t;if(ss.isNullOrUndefined(s)){s=ss.coalesce(e,"")}n=s}return n};global.Q$LT=a;var o=function(){};o.__typeName="Q$ScriptData";o.bindToChange=function(e,t,n){$(document.body).bind("scriptdatachange."+t,function(t,s){if(ss.referenceEquals(s,e)){n()}})};o.triggerChange=function(e){$(document.body).triggerHandler("scriptdatachange",[e])};o.unbindFromChange=function(e){$(document.body).unbind("scriptdatachange."+e)};o.$loadScriptData=function(e){if(!ss.keyExists(o.$registered,e)){throw new ss.Exception(ss.formatString("Script data {0} is not found in registered script list!",e))}e=e+".js?"+o.$registered[e];o.$syncLoadScript(t.resolveUrl("~/DynJS.axd/")+e)};o.$loadScriptDataAsync=function(e){var n=0,s=new ss.TaskCompletionSource,i;var r=function(){try{e:for(;;){switch(n){case 0:{n=-1;if(!ss.keyExists(o.$registered,e)){throw new ss.Exception(ss.formatString("Script data {0} is not found in registered script list!",e))}e=e+".js?"+o.$registered[e];i=o.$loadScriptAsync(t.resolveUrl("~/DynJS.axd/")+e);n=1;i.continueWith(r);return}case 1:{n=-1;i.getAwaitedResult();n=-1;break e}default:{break e}}}s.setResult(null)}catch(a){s.setException(ss.Exception.wrap(a))}};r();return s.task};o.$syncLoadScript=function(e){$.ajax({async:false,cache:true,type:"GET",url:e,data:null,dataType:"script"})};o.$loadScriptAsync=function(e){var n=0,s=new ss.TaskCompletionSource,i;var r=function(){try{e:for(;;){switch(n){case 0:{n=-1;t.blockUI(null);i=ss.Task.fromPromise($.ajax({async:true,cache:true,type:"GET",url:e,data:null,dataType:"script"}).always(function(){t.blockUndo()}));n=1;i.continueWith(r);return}case 1:{n=-1;i.getAwaitedResult();n=-1;break e}default:{break e}}}s.setResult(null)}catch(a){s.setException(ss.Exception.wrap(a))}};r();return s.task};o.ensure=function(e){var t=o.$loadedData[e];if(!ss.isValue(t)){o.$loadScriptData(e)}t=o.$loadedData[e];if(!ss.isValue(t)){throw new ss.NotSupportedException(ss.formatString("Can't load script data: {0}!",e))}return t};o.ensureAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s,i;var r=function(){try{e:for(;;){switch(t){case 0:{t=-1;s=o.$loadedData[e];if(!ss.isValue(s)){i=o.$loadScriptDataAsync(e);t=2;i.continueWith(r);return}t=1;continue e}case 2:{t=-1;i.getAwaitedResult();s=o.$loadedData[e];if(!ss.isValue(s)){throw new ss.NotSupportedException(ss.formatString("Can't load script data: {0}!",e))}t=1;continue e}case 1:{t=-1;n.setResult(s);return}default:{break e}}}}catch(a){n.setException(ss.Exception.wrap(a))}};r();return n.task};o.reload=function(e){if(!ss.keyExists(o.$registered,e)){throw new ss.NotSupportedException(ss.formatString("Script data {0} is not found in registered script list!"))}o.$registered[e]=(new Date).getTime().toString();o.$loadScriptData(e);var t=o.$loadedData[e];return t};o.reloadAsync=function(e){var t=0,n=new ss.TaskCompletionSource,s;var i=function(){try{e:for(;;){switch(t){case 0:{t=-1;if(!ss.keyExists(o.$registered,e)){throw new ss.NotSupportedException(ss.formatString("Script data {0} is not found in registered script list!"))}o.$registered[e]=(new Date).getTime().toString();s=o.$loadScriptDataAsync(e);t=1;s.continueWith(i);return}case 1:{t=-1;s.getAwaitedResult();n.setResult(o.$loadedData[e]);return}default:{break e}}}}catch(r){n.setException(ss.Exception.wrap(r))}};i();return n.task};o.canLoad=function(e){var t=o.$loadedData[e];if(ss.isValue(t)||ss.keyExists(o.$registered,e)){return true}return false};o.setRegisteredScripts=function(e){ss.clearKeys(o.$registered);var t=new ss.ObjectEnumerator(e);try{while(t.moveNext()){var n=t.current();o.$registered[n.key]=n.value.toString()}}finally{t.dispose()}};o.set=function(e,t){o.$loadedData[e]=t;o.triggerChange(e)};global.Q$ScriptData=o;var l=function(){};l.__typeName="Texts";global.Texts=l;var u=function(){};u.__typeName="Texts$Controls";global.Texts$Controls=u;var c=function(){};c.__typeName="Texts$Controls$EntityDialog";global.Texts$Controls$EntityDialog=c;var f=function(){};f.__typeName="Texts$Controls$EntityGrid";global.Texts$Controls$EntityGrid=f;var d=function(){};d.__typeName="Texts$Controls$Pager";global.Texts$Controls$Pager=d;var g=function(){};g.__typeName="Texts$Controls$PropertyGrid";global.Texts$Controls$PropertyGrid=g;var p=function(){};p.__typeName="Texts$Controls$QuickSearch";global.Texts$Controls$QuickSearch=p;var y=function(){};y.__typeName="Texts$Dialogs";global.Texts$Dialogs=y;var h=function(){};h.__typeName="Serenity.Criteria";h.isEmpty=function(e){var t=e;return t.length===0||t.length===1&&ss.isInstanceOfType(t[0],String)&&ss.cast(t[0],String).length===0};h.join=function(e,t,n){if(ss.referenceEquals(null,e)){throw new ss.ArgumentNullException("criteria1")}if(ss.referenceEquals(null,n)){throw new ss.ArgumentNullException("criteria2")}if(Serenity.Criteria.isEmpty(e)){return n}if(Serenity.Criteria.isEmpty(n)){return e}return[e,t,n]};h.paren=function(e){if(!Serenity.Criteria.isEmpty(e)){return["()",e]}return e};global.Serenity.Criteria=h;var m=function(e){this.$2$ValueField=null;this.set_value(e)};m.__typeName="Serenity.DialogTypeAttribute";global.Serenity.DialogTypeAttribute=m;var v=function(){};v.__typeName="Serenity.EditorAttribute";global.Serenity.EditorAttribute=v;var b=function(e){this.$html=null;this.$html=e};b.__typeName="Serenity.ElementAttribute";global.Serenity.ElementAttribute=b;var S=function(e){this.$2$ValueField=null;this.set_value(e)};S.__typeName="Serenity.EntityTypeAttribute";global.Serenity.EntityTypeAttribute=S;var w=function(e){this.$2$ValueField=null;this.set_value(e)};w.__typeName="Serenity.FormKeyAttribute";global.Serenity.FormKeyAttribute=w;var T=function(){};T.__typeName="Serenity.IdExtensions";T.convertToId=function(e){return Q$Externals.toId(e)};T.isPositiveId=function(e){if(!ss.isValue(e)){return false}else if(typeof e==="string"){var t=e;if(ss.startsWithString(t,"-")){return false}return t.length>0}else if(typeof e==="number"){return e>0}else{return true}};T.isNegativeId=function(e){if(!ss.isValue(e)){return false}else if(typeof e==="string"){var t=e;if(ss.startsWithString(t,"-")){return true}return false}else if(typeof e==="number"){return e<0}else{return false}};global.Serenity.IdExtensions=T;var C=function(e){this.$2$ValueField=null;this.set_value(e)};C.__typeName="Serenity.IdPropertyAttribute";global.Serenity.IdPropertyAttribute=C;var E=function(e){this.$2$ValueField=null;this.set_value(e)};E.__typeName="Serenity.IsActivePropertyAttribute";global.Serenity.IsActivePropertyAttribute=E;var x=function(e){this.$2$ValueField=null;this.set_value(e)};x.__typeName="Serenity.ItemNameAttribute";global.Serenity.ItemNameAttribute=x;var _=function(){};_.__typeName="Serenity.LazyLoadHelper";_.executeOnceWhenShown=function(e,t){_.$autoIncrement++;var n="ExecuteOnceWhenShown"+_.$autoIncrement;var s=false;if(e.is(":visible")){t()}else{var i=e.closest(".ui-tabs");if(i.length>0){i.bind("tabsshow."+n,function(r){if(e.is(":visible")){i.unbind("tabsshow."+n);if(!s){s=true;e.unbind("shown."+n);t()}}})}var r;if(e.hasClass("ui-dialog")){r=e.children(".ui-dialog-content")}else{r=e.closest(".ui-dialog-content")}if(r.length>0){r.bind("dialogopen."+n,function(){r.unbind("dialogopen."+n);if(e.is(":visible")&&!s){s=true;e.unbind("shown."+n);t()}})}e.bind("shown."+n,function(){if(e.is(":visible")){e.unbind("shown."+n);if(!s){s=true;t()}}})}};_.executeEverytimeWhenShown=function(e,t,n){_.$autoIncrement++;var s="ExecuteEverytimeWhenShown"+_.$autoIncrement;var i=e.is(":visible");if(i&&n){t()}var r=function(n){if(e.is(":visible")){if(!i){i=true;t()}}else{i=false}};var a=e.closest(".ui-tabs");if(a.length>0){a.bind("tabsactivate."+s,r)}var o=e.closest(".ui-dialog-content");if(o.length>0){o.bind("dialogopen."+s,r)}e.bind("shown."+s,r)};global.Serenity.LazyLoadHelper=_;var N=function(e){this.$2$ValueField=null;this.set_value(e)};N.__typeName="Serenity.LocalTextPrefixAttribute";global.Serenity.LocalTextPrefixAttribute=N;var k=function(e){this.$2$ValueField=null;this.set_value(e)};k.__typeName="Serenity.NamePropertyAttribute";global.Serenity.NamePropertyAttribute=k;var I=function(e){this.$2$OptionsTypeField=null;this.set_optionsType(e)};I.__typeName="Serenity.OptionsTypeAttribute";global.Serenity.OptionsTypeAttribute=I;var O=function(){};O.__typeName="Serenity.ScriptContext";global.Serenity.ScriptContext=O;var D=function(e){this.$2$ValueField=null;this.set_value(e)};D.__typeName="Serenity.ServiceAttribute";global.Serenity.ServiceAttribute=D;var L=function(){};L.__typeName="Serenity.SlickFormatting";L.getEnumText=function(e){return function(t){var n=ss.Enum.toString(e,t);return L.getEnumText$1(ss.getTypeName(e),n)}};L.getEnumText$1=function(e,n){if(ss.isValue(n)){return t.htmlEncode(t.text("Enums."+e+"."+n))}else{return""}};L.enum$1=function(e){return function(n){if(ss.isValue(n.value)){return t.htmlEncode(t.text("Enums."+e+"."+n.value))}else{return""}}};L.treeToggle=function(e){return function(t,n,s){return function(i){var r=s(i);var a=t();var o=ss.coalesce(i.item._indent,0);var l='<span class="s-TreeIndent" style="width:'+15*o+'px"></span>';var u=n(ss.cast(i.item,e));var c=a.getIdxById(u);var f=a.getItemByIdx(c+1);if(!!ss.isValue(f)){var d=ss.coalesce(f._indent,0);if(d>o){if(!!!!i.item._collapsed){return l+'<span class="s-TreeToggle s-TreeExpand"></span>'+r}else{return l+'<span class="s-TreeToggle s-TreeCollapse"></span>'+r}}}return l+'<span class="s-TreeToggle"></span>'+r}}};L.$formatDate=function(e,n){if(!ss.isValue(e)){return""}var s;if(typeof e==="date"){s=e}else if(typeof e==="string"){s=Q$Externals.parseISODateTime(e);if(ss.staticEquals(s,null)){return t.htmlEncode(e)}}else{return e.toString()}return t.htmlEncode(t.formatDate(s,n))};L.date=function(e){var n=e;if(ss.isNullOrUndefined(n)){n=s.dateFormat}e=n;return function(n){return t.htmlEncode(L.$formatDate(n.value,e))}};L.dateTime=function(e){var n=e;if(ss.isNullOrUndefined(n)){n=s.dateTimeFormat}e=n;return function(n){return t.htmlEncode(L.$formatDate(n.value,e))}};L.checkBox=function(){return function(e){return'<span class="check-box no-float '+(!!e.value?" checked":"")+'"></span>'}};L.number=function(e){return function(n){var s=n.value;if(!ss.isValue(n.value)||isNaN(s)){return""}if(typeof s==="number"){return t.htmlEncode(t.formatNumber(s,e))}var i=t.parseDecimal(s.toString());if(ss.isNullOrUndefined(i)){return""}return t.htmlEncode(s.toString())}};L.getItemType$1=function(e){return L.getItemType(e.attr("href"))};L.getItemType=function(e){if(t.isEmptyOrNull(e)){return null}if(ss.startsWithString(e,"#")){e=e.substr(1)}var n=e.lastIndexOf(String.fromCharCode(47));if(n>=0){e=e.substr(0,n)}return e};L.getItemId$1=function(e){return L.getItemId(e.attr("href"))};L.getItemId=function(e){if(t.isEmptyOrNull(e)){return null}if(ss.startsWithString(e,"#")){e=e.substr(1)}var n=e.lastIndexOf(String.fromCharCode(47));if(n>=0){e=e.substr(n+1)}return e};L.itemLinkText=function(e,n,s,i){return"<a"+(ss.isValue(n)?' href="#'+e+"/"+n+'"':"")+' class="s-'+e+"Link"+(t.isEmptyOrNull(i)?"":" "+i)+'">'+t.htmlEncode(ss.coalesce(s,""))+"</a>"};L.itemLink=function(e,t,n,s){return function(i){return ss.cast(L.itemLinkText(e,i.item[t],ss.staticEquals(n,null)?i.value:n(i),ss.staticEquals(s,null)?"":s(i)),String)}};global.Serenity.SlickFormatting=L;var A=function(){};A.__typeName="Serenity.SlickHelper";A.setDefaults=function(e,n){var s=ss.getEnumerator(e);try{while(s.moveNext()){var i=s.current();i.sortable=ss.isValue(i.sortable)?i.sortable:true;var r=i.id;if(ss.isNullOrUndefined(r)){r=i.field}i.id=r;if(ss.isValue(n)&&ss.isValue(i.id)&&(ss.isNullOrUndefined(i.name)||ss.startsWithString(i.name,"~"))){var a=ss.isValue(i.name)?i.name.substr(1):i.id;i.name=t.text(n+a)}if(ss.staticEquals(i.formatter,null)&&!ss.staticEquals(i.format,null)){i.formatter=A.convertToFormatter(i.format)}else if(ss.staticEquals(i.formatter,null)){i.formatter=function(e,n,s,i,r){return t.htmlEncode(s)}}}}finally{s.dispose()}return e};A.convertToFormatter=function(e){if(ss.staticEquals(e,null)){return null}else{return function(t,n,s,i,r){return e({row:t,cell:n,value:s,column:i,item:r})}}};global.Serenity.SlickHelper=A;var F=function(){};F.__typeName="Serenity.SlickTreeHelper";F.filterCustom=function(e,t){var n=t(e);var s=0;while(ss.isValue(n)){if(!!n._collapsed){return false}n=t(n);if(s++>1e3){throw new ss.InvalidOperationException("Possible infinite loop, check parents has no circular reference!")}}return true};F.filterById=function(e,t,n){return F.filterCustom(e,function(e){var s=n(e);if(ss.isNullOrUndefined(s)){return null}return t.getItemById(s)})};F.setCollapsed=function(e,t){if(ss.isValue(e)){var n=ss.getEnumerator(e);try{while(n.moveNext()){var s=n.current();s._collapsed=t}}finally{n.dispose()}}};F.setCollapsedFlag=function(e,t){e._collapsed=t};F.setIndents=function(e,t,n,s){var i=0;var r={};for(var a=0;a<ss.count(e);a++){var o=ss.getItem(e,a);if(a>0){var l=n(o);if(ss.isValue(l)&&ss.referenceEquals(l,t(ss.getItem(e,a-1)))){i+=1}else if(ss.isNullOrUndefined(l)){i=0}else if(!ss.referenceEquals(l,n(ss.getItem(e,a-1)))){if(ss.keyExists(r,l)){i=r[l]+1}else{i=0}}}r[t(o)]=i;o._indent=i;if(ss.isValue(s)){o._collapsed=ss.unbox(s)}}};F.toggleClick=function(e){return function(t,n,s,i,r){var a=$(t.target);if(!a.hasClass("s-TreeToggle")){return}if(a.hasClass("s-TreeCollapse")||a.hasClass("s-TreeExpand")){var o=i.rows[n];if(!!ss.isValue(o)){if(!!!o._collapsed){o._collapsed=true}else{o._collapsed=false}i.updateItem(r(ss.cast(o,e)),o)}if(t.shiftKey){i.beginUpdate();try{F.setCollapsed(i.getItems(),!!o._collapsed);i.setItems(i.getItems(),true)}finally{i.endUpdate()}}}}};global.Serenity.SlickTreeHelper=F;var V=function(){};V.__typeName="Serenity.TabsExtensions";V.setDisabled=function(e,t,n){if(ss.isNullOrUndefined(e)){return}var s=V.indexByKey(e);if(ss.isNullOrUndefined(s)){return}var i=s[t];if(ss.isNullOrUndefined(i)){return}if(ss.unbox(i)===e.tabs("option","active")){e.tabs("option","active",0)}if(n){e.tabs("disable",ss.unbox(i))}else{e.tabs("enable",ss.unbox(i))}};V.activeTabKey=function(e){var t=e.children("ul").children("li").eq(e.tabs("option","active")).children("a").attr("href").toString();var n="_Tab";var s=t.lastIndexOf(n);if(s>=0){t=t.substr(s+n.length)}return t};V.indexByKey=function(e){var t=e.data("indexByKey");if(ss.isNullOrUndefined(t)){t={};e.children("ul").children("li").children("a").each(function(e,n){var s=n.getAttribute("href").toString();var i="_Tab";var r=s.lastIndexOf(i);if(r>=0){s=s.substr(r+i.length)}t[s]=e});e.data("indexByKey",t)}return t};global.Serenity.TabsExtensions=V;ss.initClass(t,e,{});ss.initClass(n,e,{});ss.initClass(s,e,{});ss.initClass(i,e,{});ss.initClass(r,e,{update:function(e){this.$items=[];this.$itemById={};if(ss.isValue(e)){ss.arrayAddRange(this.$items,e)}var n=this.$options.idField;if(!t.isEmptyOrNull(n)){for(var s=0;s<this.$items.length;s++){var i=this.$items[s];var r=i[n];if(ss.isValue(r)){this.$itemById[r]=i}}}},get_idField:function(){return this.$options.idField},get_parentIdField:function(){return this.$options.parentIdField},get_textField:function(){return this.$options.textField},get_textFormatter:function(){return this.$options.textFormatter},get_itemById:function(){return this.$itemById},get_items:function(){return this.$items}});ss.initClass(a,e,{get:function(){var e=a.$table[this.$key];if(ss.isNullOrUndefined(e)){e=ss.coalesce(this.$key,"")}return e},toString:function(){var e=a.$table[this.$key];if(ss.isNullOrUndefined(e)){e=ss.coalesce(this.$key,"")}return e}});ss.initClass(o,e,{});ss.initClass(l,e,{});ss.initClass(u,e,{});ss.initClass(c,e,{});ss.initClass(f,e,{});ss.initClass(d,e,{});ss.initClass(g,e,{});ss.initClass(p,e,{});ss.initClass(y,e,{});ss.initClass(h,e,{});ss.initClass(m,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(v,e,{});ss.initClass(b,e,{get_html:function(){return this.$html}});ss.initClass(S,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(w,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(T,e,{});ss.initClass(C,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(E,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(x,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(_,e,{});ss.initClass(N,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(k,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(I,e,{get_optionsType:function(){return this.$2$OptionsTypeField},set_optionsType:function(e){this.$2$OptionsTypeField=e}});ss.initClass(O,e,{});ss.initClass(D,e,{get_value:function(){return this.$2$ValueField},set_value:function(e){this.$2$ValueField=e}});ss.initClass(L,e,{});ss.initClass(A,e,{});ss.initClass(F,e,{});ss.initClass(V,e,{});s.decimalSeparator=".";s.dateSeparator="/";s.dateOrder="dmy";s.dateFormat="dd/MM/yyyy";s.dateTimeFormat="dd/MM/yyyy HH:mm:ss";a.$table={};a.empty=new a("");y.OkButton=new Q$LT("OK");y.YesButton=new Q$LT("Yes");y.NoButton=new Q$LT("No");y.CancelButton=new Q$LT("Cancel");y.AlertTitle=new Q$LT("Alert");y.ConfirmationTitle=new Q$LT("Confirm");y.InformationTitle=new Q$LT("Information");y.WarningTitle=new Q$LT("Warning");a.initializeTextClass(y,"Dialogs.");_.$autoIncrement=0;n.applicationPath="/";n.emailAllowOnlyAscii=false;n.rootNamespaces=null;n.notLoggedInHandler=null;var Q=$("link#ApplicationPath");if(Q.length>0){n.applicationPath=Q.attr("href")}n.rootNamespaces=[];ss.add(n.rootNamespaces,"Serenity");n.emailAllowOnlyAscii=true;o.$registered={};o.$loadedData={};t.$blockUICount=0;c.DeleteConfirmation=new Q$LT("Delete record?");c.UndeleteButton=new Q$LT("Undelete");c.UndeleteConfirmation=new Q$LT("Undelete record?");c.CloneButton=new Q$LT("Clone");c.SaveSuccessMessage=new Q$LT("Save success");c.SaveButton=new Q$LT("Save");c.UpdateButton=new Q$LT("Update");c.ApplyChangesButton=new Q$LT("Apply Changes");c.DeleteButton=new Q$LT("Delete");c.NewRecordTitle=new Q$LT("New {0}");c.EditRecordTitle=new Q$LT("Edit {0}{1}");a.initializeTextClass(c,"Controls.EntityDialog.");f.NewButton=new Q$LT("New {0}");f.RefreshButton=new Q$LT("Refresh");f.IncludeDeletedToggle=new Q$LT("display inactive records");a.initializeTextClass(f,"Controls.EntityGrid.");d.Page=new Q$LT("Page");d.PageStatus=new Q$LT("Showing {from} to {to} of {total} total records");d.NoRowStatus=new Q$LT("No records");d.LoadingStatus=new Q$LT("Please wait, loading data...");d.DefaultLoadError=new Q$LT("An error occured while loading data!");a.initializeTextClass(d,"Controls.Pager.");g.DefaultCategory=new Q$LT("Properties");g.RequiredHint=new Q$LT("this field is required");a.initializeTextClass(g,"Controls.PropertyGrid.");p.Placeholder=new Q$LT("search...");p.Hint=new Q$LT("enter the text to search for...");p.FieldSelection=new Q$LT("select the field to search on");a.initializeTextClass(p,"Controls.QuickSearch.")})();